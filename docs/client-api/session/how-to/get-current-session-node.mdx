---
title: "Session: How to Get the Current Session Node"
sidebar_label: ...get current session node
sidebar_position: 11
---

import Admonition from '@theme/Admonition';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';
import LanguageSwitcher from "@site/src/components/language-switcher";
import LanguageContent from "@site/src/components/language-content";

export const supportedLanguages = ["csharp", "java", "php", "nodejs"];


# Session: How to Get the Current Session Node
<LanguageSwitcher supportedLanguages={supportedLanguages} />
<LanguageContent language="csharp">


When working in a RavenDB cluster, a database can reside on multiple nodes.  
When the client needs to send a request to the server, it can have several nodes to choose from.

The client uses [this logic](../../../client-api/configuration/load-balance/overview#client-logic-for-choosing-a-node) to determine which node to send the request to.  
Learn more about load balancing the client requests in this [overview](../../../client-api/configuration/load-balance/overview).

Use the `GetCurrentSessionNode` method  from the `Advanced` session operations   
to find out what is the current node that the session sends its requests to.

## Syntax

<TabItem value="something" label="current_session_node_1">
<CodeBlock language="csharp">
{`Task<ServerNode> GetCurrentSessionNode();
`}
</CodeBlock>
</TabItem>

### Return Value

The return value of `GetCurrentSessionNode` is a **ServerNode** object
<TabItem value="something" label="current_session_node_2">
<CodeBlock language="csharp">
{`public class ServerNode
\{
    public string Url;
    public string Database;
    public string ClusterTag;
    public Role ServerRole;

    [Flags]
    public enum Role
    \{
        None = 0,
        Promotable = 1,
        Member = 2,
        Rehab = 4
    \}
\}
`}
</CodeBlock>
</TabItem>

## Example

<TabItem value="something" label="current_session_node_3">
<CodeBlock language="csharp">
{`ServerNode serverNode = await session.Advanced.GetCurrentSessionNode();
Console.WriteLine(serverNode.Url);
`}
</CodeBlock>
</TabItem>


</LanguageContent>
<LanguageContent language="java">


When working in a RavenDB cluster, a database can reside on multiple nodes.  
When the client needs to send a request to the server, it can have several nodes to choose from.

The client uses [this logic](../../../client-api/configuration/load-balance/overview#client-logic-for-choosing-a-node) to determine which node to send the request to.  
Learn more about load balancing the client requests in this [overview](../../../client-api/configuration/load-balance/overview).

Use the `GetCurrentSessionNode` method  from the `Advanced` session operations   
to find out what is the current node that the session sends its requests to.

## Syntax

<TabItem value="something-something" label="current_session_node_1">
<CodeBlock language="java">
{`ServerNode getCurrentSessionNode();
`}
</CodeBlock>
</TabItem>

### Return Value

The return value of `getCurrentSessionNode` is a **ServerNode** object
<TabItem value="something-something" label="current_session_node_2">
<CodeBlock language="java">
{`public class ServerNode \{
    private String url;
    private String database;
    private String clusterTag;
    private Role serverRole;

    // getters and setters
\}

public enum Role \{
    NONE,
    PROMOTABLE,
    MEMBER,
    REHAB
\}
`}
</CodeBlock>
</TabItem>

## Example

<TabItem value="something-something" label="current_session_node_3">
<CodeBlock language="java">
{`ServerNode serverNode = session.advanced().getCurrentSessionNode();
System.out.println(serverNode.getUrl());
`}
</CodeBlock>
</TabItem>


</LanguageContent>
<LanguageContent language="php">


When working in a RavenDB cluster, a database can reside on multiple nodes.  
When the client needs to send a request to the server, it can have several nodes to choose from.

The client uses [this logic](../../../client-api/configuration/load-balance/overview#client-logic-for-choosing-a-node) 
to determine which node to send the request to.  
Learn more about load balancing the client requests in this [overview](../../../client-api/configuration/load-balance/overview).

Use the `getCurrentSessionNode` method from the `advanced` session operations 
to find out what is the current node that the session sends its requests to.

## Syntax

<TabItem value="something-something" label="current_session_node_1">
<CodeBlock language="php">
{`public function getCurrentSessionNode(): ServerNode;
`}
</CodeBlock>
</TabItem>

### Return Value

The return value of `getCurrentSessionNode` is a `ServerNode` object
<TabItem value="something-something" label="current_session_node_2">
<CodeBlock language="php">
{`class ServerNode
\{
    private ?Url $url = null;
    private ?string $database = null;
    private string $clusterTag;
    private ?ServerNodeRole $serverRole = null;

    public function __construct()
    \{
        $this->serverRole = ServerNodeRole::none();
    \}

    // ... getters and setters
\}

class ServerNodeRole
\{
    public static function none(): ServerNodeRole;
    public static function promotable(): ServerNodeRole;
    public static function member(): ServerNodeRole;
    public static function rehab(): ServerNodeRole;
\}
`}
</CodeBlock>
</TabItem>

## Example

<TabItem value="something-something" label="current_session_node_3">
<CodeBlock language="php">
{`$serverNode = $session->advanced()->getCurrentSessionNode();
echo $serverNode->getUrl();
`}
</CodeBlock>
</TabItem>


</LanguageContent>
<LanguageContent language="nodejs">


When working in a RavenDB cluster, a database can reside on multiple nodes.  
When the client needs to send a request to the server, it can have several nodes to choose from.

The client uses [this logic](../../../client-api/configuration/load-balance/overview#client-logic-for-choosing-a-node) to determine which node to send the request to.  
Learn more about load balancing the client requests in this [overview](../../../client-api/configuration/load-balance/overview).

Use the `GetCurrentSessionNode` method  from the `advanced` session operations   
to find out what is the current node that the session sends its requests to.

## Syntax

<TabItem value="something-something" label="current_session_node_1">
<CodeBlock language="nodejs">
{`session.advanced.getCurrentSessionNode();
`}
</CodeBlock>
</TabItem>

### Return Value

The return value of `getCurrentSessionNode()` is a **ServerNode** object

<TabItem value="something-something" label="current_session_node_2">
<CodeBlock language="nodejs">
{`ServerNode \{
    url: "https://localhost:8080",
    database: "Database",
    clusterTag: "A",
    serverRole: "Member" // Role can be one of: "None", "Promotable", "Member", "Rehab" 
\}
`}
</CodeBlock>
</TabItem>

## Example

<TabItem value="something-something" label="current_session_node_3">
<CodeBlock language="nodejs">
{`const serverNode = session.advanced.getCurrentSessionNode();
console.log(serverNode.url);
`}
</CodeBlock>
</TabItem>


</LanguageContent>