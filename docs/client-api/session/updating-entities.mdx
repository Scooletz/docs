---
title: "Update Entities"
sidebar_label: Update Entities
sidebar_position: 5
---

import Admonition from '@theme/Admonition';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';
import LanguageSwitcher from "@site/src/components/LanguageSwitcher";
import LanguageContent from "@site/src/components/LanguageContent";

export const supportedLanguages = ["csharp", "python", "php", "nodejs"];


# Update Entities
<LanguageSwitcher supportedLanguages={supportedLanguages} />
<LanguageContent language="csharp">

<Admonition type="note" title="Note">

* To modify existing documents:

    * **Retrieve** documents from the database using [Load](../../client-api/session/loading-entities#load) or by a [Query](../../client-api/session/querying/how-to-query#session.query).  
      The entities loaded from the documents are added to the internal entities map that the Session manages.
  
    * **Edit** the properties you wish to change.  
      The session will track all changes made to the loaded entities.

    * **Save** to apply the changes.  
      Once `SaveChanges()` returns it is guaranteed that the data is persisted in the database.
      


* In this page:
    * [Load a document & update](../../client-api/session/updating-entities#load-a-document-&-update)
    * [Query for documents & update](../../client-api/session/updating-entities#query-for-documents-&-update)
    
</Admonition>
## Load a document & update

* In this example we `Load` a company document and update its **PostalCode** property.  

<Tabs groupId='languageSyntax'>
<TabItem value="Sync" label="Sync">
<CodeBlock language="csharp">
{`using (var session = store.OpenSession())
{
    // Load a company document
    // The entity loaded from the document will be added to the Session's entities map
    Company company = session.Load<Company>("companies/1-A");

    // Update the company's PostalCode
    company.Address.PostalCode = "TheNewPostalCode";

    // Apply changes
    session.SaveChanges();
}
`}
</CodeBlock>
</TabItem>
<TabItem value="Async" label="Async">
<CodeBlock language="csharp">
{`using (var asyncSession = store.OpenAsyncSession())
{
    // Load a document
    // The entity loaded from the document will be added to the Session's entities map
    Company company = await asyncSession.LoadAsync<Company>("companies/KitchenAppliances");

    // Update the company's PostalCode
    company.Address.PostalCode = "TheNewPostalCode";

    // Apply changes
    await asyncSession.SaveChangesAsync();
}
`}
</CodeBlock>
</TabItem>
</Tabs> 



## Query for documents & update

* In this example we `Query` for company documents whose **PostalCode** property is _12345_,  
  and modify this property for the matching documents.  

<Tabs groupId='languageSyntax'>
<TabItem value="Sync" label="Sync">
<CodeBlock language="csharp">
{`using (var session = store.OpenSession())
{
    // Query: find companies with the specified PostalCode
    // The entities loaded from the matching documents will be added to the Session's entities map
    IRavenQueryable<Company> query = session.Query<Company>()
        .Where(c => c.Address.PostalCode == "12345");

    var matchingCompanies = query.ToList();

    // Update the PostalCode for the resulting company documents
    for (var i = 0; i < matchingCompanies.Count; i++)
    {
        matchingCompanies[i].Address.PostalCode = "TheNewPostalCode";
    }

    // Apply changes
    session.SaveChanges();
}
`}
</CodeBlock>
</TabItem>
<TabItem value="Async" label="Async">
<CodeBlock language="csharp">
{`using (var asyncSession = store.OpenAsyncSession())
{
    // Query: find companies with the specified PostalCode
    // The entities loaded from the matching documents will be added to the Session's entities map
    IRavenQueryable<Company> query = asyncSession.Query<Company>()
        .Where(c => c.Address.PostalCode == "12345");

    var matchingCompanies = await query.ToListAsync();

    // Update the PostalCode for the resulting company documents
    for (var i = 0; i < matchingCompanies.Count; i++)
    {
        matchingCompanies[i].Address.PostalCode = "TheNewPostalCode";
    }

    // Apply changes
    await asyncSession.SaveChangesAsync();
}
`}
</CodeBlock>
</TabItem>
</Tabs> 




</LanguageContent>
<LanguageContent language="python">

<Admonition type="note" title="Note">

* To modify existing documents:

    * **Retrieve** documents from the database using [load](../../client-api/session/loading-entities#load) or by a [query](../../client-api/session/querying/how-to-query#session.query).  
      The entities loaded from the documents are added to the internal entities map that the Session manages.
  
    * **Edit** the properties you wish to change.  
      The session will track all changes made to the loaded entities.

    * **Save** to apply the changes.  
      Once `save_changes()` returns it is guaranteed that the data is persisted in the database.
      


* In this page:
    * [Load a document & update](../../client-api/session/updating-entities#load-a-document-&-update)
    * [Query for documents & update](../../client-api/session/updating-entities#query-for-documents-&-update)
    
</Admonition>
## Load a document & update

* In this example we `load` a company document and update its **PostalCode** property.  

<TabItem value="something-something" label="load-company-and-update">
<CodeBlock language="python">
{`with store.open_session() as session:
    # Load a company document
    # The entity loaded from the document will be added to the Session's entities map
    company = session.load("companies/1-A", Company)

    # Update the company's postal_code
    company.address["postal_code"] = "TheNewPostalCode"

    # In Python client nested objects are loaded as dicts for convenience
    # You can customize and control your class (from/to) JSON conversion to fit any case
    # Implement classmethod 'from_json(json_dict) -> YourType' to control how the object its being read
    # Implement method 'to_json() -> Dict' to manage how it's serialized

    # Apply changes
    session.save_changes()
`}
</CodeBlock>
</TabItem>



## Query for documents & update

* In this example we `query` for company documents whose **PostalCode** property is _12345_,  
  and modify this property for the matching documents.  

<TabItem value="something-something" label="query-companies-and-update">
<CodeBlock language="python">
{`with store.open_session() as session:
    # Query: find companies with the specified postal_code
    # The entities loaded from the matching documents will be added to the Session's entities map
    query = session.query(object_type=Company).where_equals("address.postal_code", "12345")

    matching_companies = list(query)

    # Update the postal_code for the resulting company documents
    for company in matching_companies:
        company.address["postal_code"] = "TheNewPostalCode"

    # Apply changes
    session.save_changes()
`}
</CodeBlock>
</TabItem>




</LanguageContent>
<LanguageContent language="php">

<Admonition type="note" title="Note">

* To modify existing documents:

    * **Retrieve** documents from the database using [load](../../client-api/session/loading-entities#load) 
      or by a [query](../../client-api/session/querying/how-to-query#session.query).  
      The entities loaded from the documents are added to the internal entities map that the session manages.  
  
    * **Edit** the properties you wish to change.  
      The session will track all changes made to the loaded entities.

    * **Save** to apply the changes.  
      Once `saveChanges()` returns it is guaranteed that the data is persisted in the database.
      


* In this page:
    * [Load a document & update](../../client-api/session/updating-entities#load-a-document-&-update)
    * [Query for documents & update](../../client-api/session/updating-entities#query-for-documents-&-update)
    
</Admonition>
## Load a document & update

* In this example we `load` a company document and update its **PostalCode** property.  

<TabItem value="something-something" label="load-company-and-update">
<CodeBlock language="php">
{`$session = $store->openSession();
try \{
    // Load a company document
    // The entity loaded from the document will be added to the Session's entities map
    /** @var Company $company */
    $company = $session->load(Company::class, "companies/1-A");

    // Update the company's PostalCode
    $address = $company->getAddress();
    $address->setPostalCode("TheNewPostalCode");
    $company->setAddress($address);

    // Apply changes
    $session->saveChanges();
\} finally \{
    $session->close();
\}
`}
</CodeBlock>
</TabItem>



## Query for documents & update

* In this example we `query` for company documents whose **PostalCode** property is _12345_,  
  and modify this property for the matching documents.  

<TabItem value="something-something" label="query-companies-and-update">
<CodeBlock language="php">
{`$session = $store->openSession();
try \{
    // Query: find companies with the specified PostalCode
    // The entities loaded from the matching documents will be added to the Session's entities map
    $query = $session->query(Company::class)
        ->whereEquals("address.postal_code", "12345");

    $matchingCompanies = $query->toList();

    // Update the PostalCode for the resulting company documents
    for ($i = 0; $i < count($matchingCompanies); $i++) \{
        $address = $matchingCompanies[$i]->getAddress();
        $address->setPostalCode("TheNewPostalCode");
        $matchingCompanies[$i]->setAddress($address);
    \}

    // Apply changes
    $session->saveChanges();
\} finally \{
    $session->close();
\}
`}
</CodeBlock>
</TabItem>




</LanguageContent>
<LanguageContent language="nodejs">

<Admonition type="note" title="Note">

* To modify existing documents:

    * **Retrieve** documents from the database using [load](../../client-api/session/loading-entities#load) or by a [query](../../client-api/session/querying/how-to-query#session.query).  
      The entities loaded from the documents are added to the internal entities map that the Session manages.

    * **Edit** the properties you wish to change.  
      The session will track all changes made to the loaded entities.

    * **Save** to apply the changes.  
      Once `saveChanges()` returns it is guaranteed that the data is persisted in the database.



* In this page:
    * [Load a document & update](../../client-api/session/updating-entities#load-a-document-&-update)
    * [Query for documents & update](../../client-api/session/updating-entities#query-for-documents-&-update)

</Admonition>
## Load a document & update

* In this example we `load` a company document and update its **postalCode** property.

<TabItem value="something-something" label="sample_document">
<CodeBlock language="nodejs">
{`// Sample company document structure
class Address \{
    constructor(code) \{
        this.postalCode = code;
    \}
\}

class Company \{
    constructor(name, code) \{
        this.name = name;
        this.address = new Address(code);
    \}
\}
`}
</CodeBlock>
</TabItem>

<TabItem value="something-something" label="load-company-and-update">
<CodeBlock language="nodejs">
{`const session = documentStore.openSession();

// Load a company document
// The entity loaded from the document will be added to the Session's entities map
const company = await session.load("companies/1-A");

// Update the company's postalCode
company.address.postalCode = "TheNewPostalCode";

// Apply changes
await session.saveChanges();
`}
</CodeBlock>
</TabItem>



## Query for documents & update

* In this example we `query` for company documents whose **postalCode** property is _12345_,  
  and modify this property for the matching documents.

<TabItem value="something-something" label="query-company-and-update">
<CodeBlock language="nodejs">
{`const session = documentStore.openSession();

// Query: find companies with the specified postalCode
// The entities loaded from the matching documents will be added to the Session's entities map
const matchingCompanies = await session.query(\{collection: "Companies"\})
    .whereEquals("address.postalCode", "12345")
    .all();

// Update the postalCode for the resulting company documents
matchingCompanies.forEach(c => c.address.postalCode = "TheNewPostalCode");

// Apply changes
await session.saveChanges();
`}
</CodeBlock>
</TabItem>




</LanguageContent>