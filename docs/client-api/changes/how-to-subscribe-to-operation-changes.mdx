---
title: "Changes API: How to Subscribe to Operation Changes"
hide_table_of_contents: true
sidebar_label: How to Subscribe to Operation Changes
sidebar_position: 3
---

import Admonition from '@theme/Admonition';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';
import LanguageSwitcher from "@site/src/components/LanguageSwitcher";
import LanguageContent from "@site/src/components/LanguageContent";

export const supportedLanguages = ["csharp", "java", "nodejs"];


# Changes API: How to Subscribe to Operation Changes
<LanguageSwitcher supportedLanguages={supportedLanguages} />
<LanguageContent language="csharp">


The following methods allow you to subscribe to operation changes:

- [ForOperationId](../../client-api/changes/how-to-subscribe-to-operation-changes.mdx#foroperationid)
- [ForAllOperations](../../client-api/changes/how-to-subscribe-to-operation-changes.mdx#foralloperations)

## ForOperationId

Operation changes for one operation can be observed using the `ForOperationId` method.

<Admonition type="note" title="">
Please note that from RavenDB 6.2 on, operation changes can be tracked only on a **specific node**.  
The purpose of this change is to improve results consistency, as an operation may behave very differently 
on different nodes and cross-cluster tracking of an operation may become confusing and ineffective if 
the operation fails over from one node to another.  
Tracking operations will therefore be possible only if the `Changes` API was 
[opened](../../client-api/changes/what-is-changes-api.mdx#accessing-changes-api) using a method that limits 
tracking to a single node: `store.Changes(dbName, nodeTag)`  
</Admonition>

### Syntax

<TabItem value="operation_changes_1" label="operation_changes_1">
<CodeBlock language="csharp">
{`IChangesObservable<OperationStatusChange> ForOperationId(long operationId);
`}
</CodeBlock>
</TabItem>

| Parameters | | |
| ------------- | ------------- | ----- |
| **operationId** | long | ID of an operation for which notifications will be processed. |

| Return value | |
| ------------- | ----- |
| IChangesObservable&lt;[OperationStatusChange](../../client-api/changes/how-to-subscribe-to-operation-changes.mdx#operationchange)&gt; | Observable that allows you to add subscriptions to notifications for an operation with a given ID. |

### Example

<TabItem value="operation_changes_2" label="operation_changes_2">
<CodeBlock language="csharp">
{`IDisposable subscription = store
    .Changes(dbName, nodeTag)
    .ForOperationId(operationId)
    .Subscribe(
        change =>
        \{
            switch (change.State.Status)
            \{
                case OperationStatus.InProgress:
                    //Do Something
                    break;
                case OperationStatus.Completed:
                    //Do Something
                    break;
                case OperationStatus.Faulted:
                    //Do Something
                    break;
                case OperationStatus.Canceled:
                    //Do Something
                    break;
                default:
                    throw new ArgumentOutOfRangeException();
            \}
        \});
`}
</CodeBlock>
</TabItem>



## ForAllOperations

Operations changes for all Operations can be observed using the `ForAllOperations` method.

<Admonition type="note" title="">
Please note that from RavenDB 6.2 on, operation changes can be tracked only on a **specific node**.  
The purpose of this change is to improve results consistency, as an operation may behave very differently 
on different nodes and cross-cluster tracking of an operation may become confusing and ineffective if 
the operation fails over from one node to another.  
Tracking operations will therefore be possible only if the `Changes` API was 
[opened](../../client-api/changes/what-is-changes-api.mdx#accessing-changes-api) using a method that limits 
tracking to a single node: `store.Changes(dbName, nodeTag)`  
</Admonition>

| Return Value | |
| ------------- | ----- |
| IChangesObservable&lt;[OperationStatusChange](../../client-api/changes/how-to-subscribe-to-operation-changes.mdx#operationchange)&gt; | Observable that allows to add subscriptions to notifications for all operations. |

### Syntax

<TabItem value="operation_changes_3" label="operation_changes_3">
<CodeBlock language="csharp">
{`IChangesObservable<OperationStatusChange> ForAllOperations();
`}
</CodeBlock>
</TabItem>

### Example

<TabItem value="operation_changes_4" label="operation_changes_4">
<CodeBlock language="csharp">
{`IDisposable subscription = store
    .Changes(dbName, nodeTag)
    .ForAllOperations()
    .Subscribe(change => Console.WriteLine("Operation #\{1\} reports progress: \{0\}", change.State.Progress.ToJson(), change.OperationId));
`}
</CodeBlock>
</TabItem>



## OperationChange

### Properties

| Name | Type | Description |
| ------------- | ------------- | ----- |
| **State** | [OperationState](../../client-api/changes/how-to-subscribe-to-operation-changes.mdx#operationstate) | Operation state |
| **OperationId** | long | Operation ID |



## OperationState

### Members

| Name | Type | Description |
| ------------- | ------------- | ----- |
| **Result** | [IOperationResult](../../client-api/changes/how-to-subscribe-to-operation-changes.mdx#operationresult) | Operation result |
| **Progress** | IOperationProgress| Instance of IOperationProgress (json representation of the progress) |
| **Status** | [OperationStatus](../../client-api/changes/how-to-subscribe-to-operation-changes.mdx#operationstatus) | Operation status |


## OperationResult

### Members

| Name | Type | Description |
| ------------- | ------------- | ----- |
| **Message** | string | Operation message |
| **ShouldPersist** | bool | determine whether or not the result should be saved in the storage |


## OperationStatus

# OperationStatus (enum)

| Name | Description |
| ---- | ----- |
| **InProgress** | `Indicates that the operation made progress` |
| **Completed** | `Indicates that the operation has completed` |
| **Faulted** | `Indicates that the operation is faulted` |
| **Canceled** | `Indicates that the operation has been Canceled` |


## Remarks

<Admonition type="warning" title="">
To get more method overloads, especially ones supporting **delegates**, please add the 
[System.Reactive.Core](https://www.nuget.org/packages/System.Reactive.Core/) package to your project.  
</Admonition>


</LanguageContent>
<LanguageContent language="java">


The following methods allow you to subscribe to operation changes:

- [forOperationId](../../client-api/changes/how-to-subscribe-to-operation-changes.mdx#foroperation)
- [forAllOperations](../../client-api/changes/how-to-subscribe-to-operation-changes.mdx#foralloperations)

## forOperation

Operation changes for one operation can be observed using the `forOperationId` method.

### Syntax

<TabItem value="operation_changes_1" label="operation_changes_1">
<CodeBlock language="java">
{`IChangesObservable<OperationStatusChange> forOperationId(long operationId);
`}
</CodeBlock>
</TabItem>

| Parameters | | |
| ------------- | ------------- | ----- |
| **operationId** | long | ID of an operation for which notifications will be processed. |

| Return value | |
| ------------- | ----- |
| IChangesObservable&lt;[OperationStatusChange](../../client-api/changes/how-to-subscribe-to-operation-changes.mdx#operationchange)&gt; | Observable that allows you to add subscriptions to notifications for an operation with a given ID. |

### Example

<TabItem value="operation_changes_2" label="operation_changes_2">
<CodeBlock language="java">
{`CleanCloseable subscription = store
    .changes()
    .forOperationId(operationId)
    .subscribe(Observers.create(change -> \{
        ObjectNode operationState = change.getState();

        // do something
    \}));
`}
</CodeBlock>
</TabItem>



## forAllOperations

Operations changes for all Operations can be observed using the `forAllOperations` method.

| Return Value | |
| ------------- | ----- |
| IChangesObservable&lt;[OperationStatusChange](../../client-api/changes/how-to-subscribe-to-operation-changes.mdx#operationchange)&gt; | Observable that allows to add subscriptions to notifications for all operations. |

### Syntax

<TabItem value="operation_changes_3" label="operation_changes_3">
<CodeBlock language="java">
{`IChangesObservable<OperationStatusChange> forAllOperations();
`}
</CodeBlock>
</TabItem>

### Example

<TabItem value="operation_changes_4" label="operation_changes_4">
<CodeBlock language="java">
{`CleanCloseable subscription = store
    .changes()
    .forAllOperations()
    .subscribe(Observers.create(change -> \{
        System.out.println("Operation #" + change.getOperationId());
    \}));
`}
</CodeBlock>
</TabItem>



## OperationChange

### Properties

| Name | Type | Description |
| ------------- | ------------- | ----- |
| **State** | ObjectNode | Operation state |
| **OperationId** | long | Operation ID |





</LanguageContent>
<LanguageContent language="nodejs">


The following methods allow you to subscribe to operation changes:

- [forOperationId()](../../client-api/changes/how-to-subscribe-to-operation-changes.mdx#foroperation)
- [forAllOperations()](../../client-api/changes/how-to-subscribe-to-operation-changes.mdx#foralloperations)

## forOperation

Operation changes for one operation can be observed using the `forOperationId()` method.

### Syntax

<TabItem value="operation_changes_1" label="operation_changes_1">
<CodeBlock language="js">
{`store.changes().forOperationId(operationId);
`}
</CodeBlock>
</TabItem>

| Parameters | | |
| ------------- | ------------- | ----- |
| **operationId** | number | ID of an operation for which notifications will be processed. |

| Return value | |
| ------------- | ----- |
| IChangesObservable&lt;[OperationStatusChange](../../client-api/changes/how-to-subscribe-to-operation-changes.mdx#operationchange)&gt; | Observable that allows you to add subscriptions to notifications for an operation with a given ID. |

### Example

<TabItem value="operation_changes_2" label="operation_changes_2">
<CodeBlock language="js">
{`store.changes().forOperationId(operationId)
    .on("data", change => \{
        const operationState = change.state;

        // do something
    \});
`}
</CodeBlock>
</TabItem>



## forAllOperations

Operations changes for all Operations can be observed using the `forAllOperations()` method.

| Return Value | |
| ------------- | ----- |
| IChangesObservable&lt;[OperationStatusChange](../../client-api/changes/how-to-subscribe-to-operation-changes.mdx#operationchange)&gt; | Observable that allows to add subscriptions to notifications for all operations. |

### Syntax

<TabItem value="operation_changes_3" label="operation_changes_3">
<CodeBlock language="js">
{`store.changes().forAllOperations();
`}
</CodeBlock>
</TabItem>

### Example

<TabItem value="operation_changes_4" label="operation_changes_4">
<CodeBlock language="js">
{`store.changes().forAllOperations()
    .on("data", change => \{
        console.log("Operation #" + change.operationId);
    \});
`}
</CodeBlock>
</TabItem>



## OperationChange

### Properties

| Name | Type | Description |
| ------------- | ------------- | ----- |
| **state** | object | Operation state |
| **operationId** | number | Operation ID |





</LanguageContent>

<!---
### Changes API
- [What is Changes API](../../client-api/changes/what-is-changes-api)
- [How to Subscribe to Index Changes](../../client-api/changes/how-to-subscribe-to-index-changes)


-->