---
title: "Conventions: Serialization"
sidebar_label: Serialization
sidebar_position: 2
---

import Admonition from '@theme/Admonition';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';
import LanguageSwitcher from "@site/src/components/LanguageSwitcher";
import LanguageContent from "@site/src/components/LanguageContent";

export const supportedLanguages = ["csharp", "java"];


# Conventions: Serialization
<LanguageSwitcher supportedLanguages={supportedLanguages} />
<LanguageContent language="csharp">

<Admonition type="note" title="Note">

Use the methods described in this page to customize the [conventions](../../client-api/configuration/conventions) 
by which entities are serialized as they are sent by the client to the server.  

* In this page:  
  * [CustomizeJsonSerializer](../../client-api/configuration/serialization#customizejsonserializer)  
  * [JsonContractResolver](../../client-api/configuration/serialization#jsoncontractresolver)  
  * [BulkInsert.TrySerializeEntityToJsonStream](../../client-api/configuration/serialization#bulkinsert.tryserializeentitytojsonstream)  
  * [IgnoreByRefMembers and IgnoreUnsafeMembers](../../client-api/configuration/serialization#ignorebyrefmembers-and-ignoreunsafemembers)  

</Admonition>
## Serialization

## CustomizeJsonSerializer

* The `JsonSerializer` object is used by the client to serialize entities 
  sent by the client to the server.  
* Use the `CustomizeJsonSerializer ` convention to modify `JsonSerializer` 
  by registering a serialization customization action.  

<TabItem value="something" label="customize_json_serializer">
<CodeBlock language="csharp">
{`Serialization = new NewtonsoftJsonSerializationConventions
\{
    CustomizeJsonSerializer = serializer => throw new CodeOmitted()
\}
`}
</CodeBlock>
</TabItem>

## JsonContractResolver

* The default `JsonContractResolver` convention used by RavenDB will serialize 
  **all** properties and **all** public fields.  
* Change this behavior by providing your own implementation of the `IContractResolver` 
  interface.  

<TabItem value="something" label="json_contract_resolver">
<CodeBlock language="csharp">
{`Serialization = new NewtonsoftJsonSerializationConventions
\{
    JsonContractResolver = new CustomJsonContractResolver()
\}
`}
</CodeBlock>
</TabItem>

<TabItem value="something" label="custom_json_contract_resolver">
<CodeBlock language="csharp">
{`public class CustomJsonContractResolver : IContractResolver
\{
    public JsonContract ResolveContract(Type type)
    \{
        throw new CodeOmitted();
    \}
\}
`}
</CodeBlock>
</TabItem>

* You can also customize the behavior of the **default resolver** by inheriting 
  from `DefaultRavenContractResolver` and overriding specific methods.  

<TabItem value="something" label="custom_json_contract_resolver_based_on_default">
<CodeBlock language="csharp">
{`public class CustomizedRavenJsonContractResolver : DefaultRavenContractResolver
\{
    public CustomizedRavenJsonContractResolver(ISerializationConventions conventions) : base(conventions)
    \{
    \}

    protected override JsonProperty CreateProperty(MemberInfo member, MemberSerialization memberSerialization)
    \{
        throw new CodeOmitted();
    \}
\}
`}
</CodeBlock>
</TabItem>

## BulkInsert.TrySerializeEntityToJsonStream

* Adjust [Bulk Insert](../../client-api/bulk-insert/how-to-work-with-bulk-insert-operation) 
  behavior by using the `TrySerializeEntityToJsonStream` convention to register a custom 
  serialization implementation.  

<TabItem value="something" label="TrySerializeEntityToJsonStream">
<CodeBlock language="csharp">
{`BulkInsert =
\{
    TrySerializeEntityToJsonStream = (entity, metadata, writer) => throw new CodeOmitted(),
\}
`}
</CodeBlock>
</TabItem>

## IgnoreByRefMembers and IgnoreUnsafeMembers

* By default, if you try to store an entity with `ref` or unsafe members, 
  the Client will throw an exception when [`session.SaveChanges()`](../../client-api/session/saving-changes) 
  is called.  
* Set the `IgnoreByRefMembers` convention to `true` to simply ignore `ref` 
  members when an attempt to store an entity with `ref` members is made.  
  The entity will be uploaded to the server with all non-`ref` members without 
  throwing an exception.  
  The document structure on the server-side will not contain fields for those 
  `ref` members.  
* Set the `IgnoreUnsafeMembers` convention to `true` to ignore all pointer 
  members in the same manner.  
* `IgnoreByRefMembers` default value: `false`  
* `IgnoreUnsafeMembers` default value: `false`  




</LanguageContent>
<LanguageContent language="java">


## Customize ObjectMapper

If you need to customize Jackson `ObjectMapper` object used by the client when sending entities to the server you can access and modify its instance:

<TabItem value="something-something" label="customize_object_mapper">
<CodeBlock language="java">
{`ObjectMapper entityMapper = conventions.getEntityMapper();
entityMapper.configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, true);
`}
</CodeBlock>
</TabItem>

## Numbers (de)serialization

RavenDB client supports out of the box all common numeric value types: `int`, `long`, `double` etc.  
Note that although the (de)serialization of `decimals` is fully supported, there are [server side limitations](../../server/kb/numbers-in-ravendb) to numbers in that range.  
Other number types like `BigInteger` must be treated using custom (de)serialization.


</LanguageContent>