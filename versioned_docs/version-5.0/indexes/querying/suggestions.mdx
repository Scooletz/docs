---
title: "Querying: Suggestions"
hide_table_of_contents: true
sidebar_label: Suggestions
sidebar_position: 10
---

import Admonition from '@theme/Admonition';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';
import LanguageSwitcher from "@site/src/components/LanguageSwitcher";
import LanguageContent from "@site/src/components/LanguageContent";

export const supportedLanguages = ["csharp", "java", "nodejs"];


# Querying: Suggestions
<LanguageSwitcher supportedLanguages={supportedLanguages} />
<LanguageContent language="csharp">


RavenDB has an indexing mechanism built upon the Lucene engine which has a great suggestions feature. This capability allows a significant improvement of search functionalities enhancing the overall user experience of the application.

Let's consider an example where the users have the option to look for products by their name. The index and query would appear as follows:

<TabItem value="suggestions_1" label="suggestions_1">
<CodeBlock language="csharp">
{`0
                    // Define the suggestion request for multiple terms
                    var suggestionRequest = new SuggestionWithTerms("ProductName")
                    \{
                        // Looking for terms from index-field 'ProductName' that are similar to 'chokolade' OR 'syrop'  
                        Terms = new[] \{ "chokolade", "syrop"\}
                    \};

                    // Query the index for suggestions 
                    Dictionary<string, SuggestionResult> suggestions = session
                        .Query<Products_ByName.IndexEntry, Products_ByName>()
                         // Call 'SuggestUsing' - pass the suggestion request
                        .SuggestUsing(suggestionRequest)
                        .Execute();
`}
</CodeBlock>
</TabItem>

<TabItem value="suggestions_2" label="suggestions_2">
<CodeBlock language="csharp">
{`// This query on index 'Products/ByName' has NO resulting documents
List<Product> products = session
    .Query<Products_ByName.IndexEntry, Products_ByName>()
    .Search(x => x.ProductName, "chokolade")
    .OfType<Product>()
    .ToList();
`}
</CodeBlock>
</TabItem>

If our database has `Northwind` samples deployed then it will not return any results. However, we can ask RavenDB for help:

<Tabs groupId='languageSyntax'>
<TabItem value="Query" label="Query">
<CodeBlock language="csharp">
{`if (product == null)
{
    Dictionary<string, SuggestionResult> suggestionResult = session
        .Query<Product, Products_ByName>()
        .SuggestUsing(builder => builder.ByField(x => x.Name, "chaig"))
        .Execute();

    Console.WriteLine("Did you mean?");

    foreach (string suggestion in suggestionResult["Name"].Suggestions)
    {
        Console.WriteLine("\\t{0}", suggestion);
    }
}
`}
</CodeBlock>
</TabItem>
<TabItem value="DocumentQuery" label="DocumentQuery">
<CodeBlock language="csharp">
{`if (product == null)
{
    Dictionary<string, SuggestionResult> suggestionResult = session.Advanced
        .DocumentQuery<Product, Products_ByName>()
        .SuggestUsing(builder => builder.ByField(x => x.Name, "chaig"))
        .Execute();

    Console.WriteLine("Did you mean?");

    foreach (string suggestion in suggestionResult["Name"].Suggestions)
    {
        Console.WriteLine("\\t{0}", suggestion);
    }
}
`}
</CodeBlock>
</TabItem>
<TabItem value="RQL" label="RQL">
<CodeBlock language="sql">
{`from index 'Products/ByName' 
select suggest('Name', 'chaig')
`}
</CodeBlock>
</TabItem>
</Tabs>

It will produce these suggestions:

    Did you mean?
        chang
        chai

<Admonition type="note" title="Client API" id="client-api" href="#client-api">

The `SuggestUsing` method is an extension contained in the `Raven.Client.Documents` namespace. You can read more about it in our [Client API](../../client-api/session/querying/how-to-work-with-suggestions.mdx) article. 

</Admonition>

## Suggest Over Multiple Words

RavenDB allows you to perform a suggestion query over multiple words.

<Tabs groupId='languageSyntax'>
<TabItem value="Query" label="Query">
<CodeBlock language="csharp">
{`var resultsByMultipleWords = session
    .Query<Product, Products_ByName>()
    .SuggestUsing(builder => builder
        .ByField(x => x.Name, new[] { "chaig", "tof" })
        .WithOptions(new SuggestionOptions
        {
            Accuracy = 0.4f,
            PageSize = 5,
            Distance = StringDistanceTypes.JaroWinkler,
            SortMode = SuggestionSortMode.Popularity
        }))
    .Execute();

Console.WriteLine("Did you mean?");

foreach (string suggestion in resultsByMultipleWords["Name"].Suggestions)
{
    Console.WriteLine("\\t{0}", suggestion);
}
`}
</CodeBlock>
</TabItem>
<TabItem value="DocumentQuery" label="DocumentQuery">
<CodeBlock language="csharp">
{`var resultsByMultipleWords = session.Advanced
    .DocumentQuery<Product, Products_ByName>()
    .SuggestUsing(builder => builder
        .ByField(x => x.Name, new[] { "chaig", "tof" })
        .WithOptions(new SuggestionOptions
        {
            Accuracy = 0.4f,
            PageSize = 5,
            Distance = StringDistanceTypes.JaroWinkler,
            SortMode = SuggestionSortMode.Popularity
        }))
    .Execute();

Console.WriteLine("Did you mean?");

foreach (string suggestion in resultsByMultipleWords["Name"].Suggestions)
{
    Console.WriteLine("\\t{0}", suggestion);
}
`}
</CodeBlock>
</TabItem>
</Tabs>

This will produce the following results:

    Did you mean?
        chai
        chang
        chartreuse
        chef
        tofu

## Remarks

<Admonition type="warning" title="Increased indexing time" id="increased-indexing-time" href="#increased-indexing-time">

Indexes with turned on suggestions tend to use a lot more CPU power than other indexes. This can impact indexing speed (querying is not impacted).

</Admonition>


</LanguageContent>
<LanguageContent language="java">


RavenDB has an indexing mechanism built upon the Lucene engine which has a great suggestions feature. This capability allows a significant improvement of search functionalities enhancing the overall user experience of the application.

Let's consider an example where the users have the option to look for products by their name. The index and query would appear as follows:

<TabItem value="suggestions_1" label="suggestions_1">
<CodeBlock language="java">
{`public class Products_ByName extends AbstractIndexCreationTask \{
    public Products_ByName() \{
        map = "from product in docs.Products " +
            "select new " +
            "\{ " +
            "  product.Name " +
            "\} ";

        index("Name", FieldIndexing.SEARCH); // (optional) splitting name into multiple tokens
        suggestion("Name");// configuring suggestions
    \}
\}
`}
</CodeBlock>
</TabItem>

<TabItem value="suggestions_2" label="suggestions_2">
<CodeBlock language="java">
{`Product product = session
    .query(Product.class, Products_ByName.class)
    .search("Name", "chaig")
    .firstOrDefault();
`}
</CodeBlock>
</TabItem>

If our database has `Northwind` samples deployed then it will not return any results. However, we can ask RavenDB for help:

<Tabs groupId='languageSyntax'>
<TabItem value="Query" label="Query">
<CodeBlock language="java">
{`Map<String, SuggestionResult> suggestionResult = session
    .query(Product.class, Products_ByName.class)
    .suggestUsing(builder -> builder.byField("Name", "chaig"))
    .execute();

System.out.println("Did you mean?");

for (String suggestion : suggestionResult.get("Name").getSuggestions()) {
    System.out.println("\\t" + suggestion);
}
`}
</CodeBlock>
</TabItem>
<TabItem value="RQL" label="RQL">
<CodeBlock language="sql">
{`from index 'Products/ByName' 
select suggest('Name', 'chaig')
`}
</CodeBlock>
</TabItem>
</Tabs>

It will produce these suggestions:

    Did you mean?
        chang
        chai

<Admonition type="note" title="Client API" id="client-api" href="#client-api">

You can read more about suggestions in our [Client API](../../client-api/session/querying/how-to-work-with-suggestions.mdx) article. 

</Admonition>

## Suggest Over Multiple Words

RavenDB allows you to perform a suggestion query over multiple words.

<TabItem value="query_suggestion_over_multiple_words" label="query_suggestion_over_multiple_words">
<CodeBlock language="java">
{`SuggestionOptions options = new SuggestionOptions();
options.setAccuracy(0.4f);
options.setPageSize(5);
options.setDistance(StringDistanceTypes.JARO_WINKLER);
options.setSortMode(SuggestionSortMode.POPULARITY);

Map<String, SuggestionResult> resultsByMultipleWords = session
    .query(Product.class, Products_ByName.class)
    .suggestUsing(builder ->
        builder.byField("Name", new String[]\{"chaig", "tof"\})
            .withOptions(options))
    .execute();

System.out.println("Did you mean?");

for (String suggestion : resultsByMultipleWords.get("Name").getSuggestions()) \{
    System.out.println("\\t" + suggestion);
\}
`}
</CodeBlock>
</TabItem>

This will produce the following results:

    Did you mean?
        chai
        chang
        chartreuse
        chef
        tofu

## Remarks

<Admonition type="warning" title="Increased indexing time" id="increased-indexing-time" href="#increased-indexing-time">

Indexes with turned on suggestions tend to use a lot more CPU power than other indexes. This can impact indexing speed (querying is not impacted).

</Admonition>


</LanguageContent>
<LanguageContent language="nodejs">


RavenDB has an indexing mechanism built upon the Lucene engine which has a great suggestions feature. This capability allows a significant improvement of search functionalities enhancing the overall user experience of the application.

Let's consider an example where the users have the option to look for products by their name. The index and query would appear as follows:

<TabItem value="suggestions_1" label="suggestions_1">
<CodeBlock language="js">
{`0
            // The resulting suggested terms:
            // ==============================

            console.log("Suggested terms:");
            // Results are available under the custom name entry
            suggestions["SomeCustomName"].suggestions.forEach(suggestedTerm => \{
                console.log("\\t" + suggestedTerm);
            \});
            
            // Suggested terms:
            //     chocolade
            //     schokolade
            //     chocolate
            //     chowder
            //     marmalade
`}
</CodeBlock>
</TabItem>

<TabItem value="suggestions_2" label="suggestions_2">
<CodeBlock language="js">
{`// This query on index 'Products/ByName' has NO resulting documents
const products = await session
    .query(\{ indexName: "Products/ByName" \})
    .search("ProductName", "chokolade")
    .all();
`}
</CodeBlock>
</TabItem>

If our database has `Northwind` samples deployed then it will not return any results. However, we can ask RavenDB for help:

<Tabs groupId='languageSyntax'>
<TabItem value="Query" label="Query">
<CodeBlock language="js">
{`const suggestionResult = await session
    .query({ indexName: "Products/ByName" })
    .suggestUsing(builder => builder.byField("name", "chaig"))
    .execute();

console.log("Did you mean?");

for (const suggestion of suggestionResult["name"].suggestions) {
    console.log("\\t" + suggestion);
}
`}
</CodeBlock>
</TabItem>
<TabItem value="RQL" label="RQL">
<CodeBlock language="sql">
{`from index 'Products/ByName' 
select suggest('Name', 'chaig')
`}
</CodeBlock>
</TabItem>
</Tabs>

It will produce these suggestions:

    Did you mean?
        chang
        chai

<Admonition type="note" title="Client API" id="client-api" href="#client-api">

You can read more about suggestions in our [Client API](../../client-api/session/querying/how-to-work-with-suggestions.mdx) article. 

</Admonition>

## Suggest Over Multiple Words

RavenDB allows you to perform a suggestion query over multiple words.

<TabItem value="query_suggestion_over_multiple_words" label="query_suggestion_over_multiple_words">
<CodeBlock language="js">
{`const resultsByMultipleWords = await session
    .query(\{ indexName: "Products/ByName" \})
    .suggestUsing(builder =>
        builder.byField("name", [ "chaig", "tof" ])
               .withOptions(\{
                    accuracy: 0.4,
                    pageSize: 5,
                    distance: "JaroWinkler",
                    sortMode: "Popularity"
               \}))
    .execute();

console.log("Did you mean?");

for (const suggestion of resultsByMultipleWords["name"].suggestions) \{
    console.log("\\t" + suggestion);
\}
`}
</CodeBlock>
</TabItem>

This will produce the following results:

    Did you mean?
        chai
        chang
        chartreuse
        chef
        tofu

## Remarks

<Admonition type="warning" title="Increased indexing time" id="increased-indexing-time" href="#increased-indexing-time">

Indexes with turned on suggestions tend to use a lot more CPU power than other indexes. This can impact indexing speed (querying is not impacted).

</Admonition>


</LanguageContent>

<!---
### Client API
- [How to Work with Suggestions](../../client-api/session/querying/how-to-work-with-suggestions)


-->