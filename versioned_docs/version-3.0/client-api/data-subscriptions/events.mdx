---
title: "Data subscription events"
hide_table_of_contents: true
sidebar_label: Events
sidebar_position: 6
---

import Admonition from '@theme/Admonition';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';
import LanguageSwitcher from "@site/src/components/LanguageSwitcher";
import LanguageContent from "@site/src/components/LanguageContent";

export const supportedLanguages = ["csharp", "java"];



<LanguageSwitcher supportedLanguages={supportedLanguages} />
<LanguageContent language="csharp">
#Data subscription events

The `Subscription` instance exposes a few events which allow to provide control over the data stream. There are four subscription events that you can hook up:

<TabItem value="events" label="events">
<CodeBlock language="csharp">
{`//public delegate void BeforeBatch();

//public delegate bool BeforeAcknowledgment();

//public delegate void AfterAcknowledgment(Etag lastProcessedEtag);

//public delegate void AfterBatch(int documentsProcessed);
//
`}
</CodeBlock>
</TabItem>

Each of them is invoked on a different level of documents processing:

- `BeforeBatch` - called when a first document from the batch is about to be processed by handlers, if the batch is empty then the event is not raised,
- `BeforeAcknowledgment` - triggered after processing all documents in batch, the returned value determines if the batch can be acknowledged (default: `true`),
- `AfterAcknowledgment` - invoked after the batch processed acknowledgment had been sent to the server,
- `AfterBatch` - called after processing all docs from the batch.


</LanguageContent>
<LanguageContent language="java">
#Data subscription events

The `Subscription` instance exposes a few events which allow to provide control over the data stream. There are four subscription events that you can hook up:

<TabItem value="events" label="events">
<CodeBlock language="java">
{`void addBeforeBatchHandler(EventHandler<VoidArgs> handler);

void removeBeforeBatchHandler(EventHandler<VoidArgs> handler);

void addAfterBatchHandler(EventHandler<Subscription.DocumentProcessedEventArgs> handler);

void removeAfterBatchHandler(EventHandler<Subscription.DocumentProcessedEventArgs> handler);

void addBeforeAcknowledgmentHandler(EventHandler<VoidArgs> handler);

void removeBeforeAcknowledgmentHandler(EventHandler<VoidArgs> handler);

void addAfterAcknowledgmentHandler(EventHandler<Subscription.LastProcessedEtagEventArgs> handler);

void removeAfterAcknowledgmentHandler(EventHandler<Subscription.LastProcessedEtagEventArgs> handler);
`}
</CodeBlock>
</TabItem>

Each of them is invoked on a different level of documents processing:

- `beforeBatch` - called when a first document from the batch is about to be processed by handlers, if the batch is empty then the event is not raised,
- `beforeAcknowledgment` - triggered after processing all documents in batch, the returned value determines if the batch can be acknowledged (default: `true`),
- `afterAcknowledgment` - invoked after the batch processed acknowledgment had been sent to the server,
- `afterBatch` - called after processing all docs from the batch.


</LanguageContent>

<!---

-->