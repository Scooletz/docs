import Admonition from '@theme/Admonition';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';

Single entity can be checked for changes using [HasChanged](../../../client-api/session/how-to/check-if-entity-has-changed.mdx) method, but there is also a possibility to check if there are any changes on a session or even what has changed. Both `hasChanges` and `whatChanged` methods are available in `advanced` session operations.

## HasChanges

Property indicates if session contains any changes. That is if there are any new, changed or deleted entities.

### Syntax

<TabItem value="what_changed_1" label="what_changed_1">
<CodeBlock language="java">
{`boolean hasChanges()
`}
</CodeBlock>
</TabItem>

### Example

<TabItem value="what_changed_2" label="what_changed_2">
<CodeBlock language="java">
{`try (IDocumentSession session = store.openSession()) \{
    Assert.assertFalse(session.advanced().hasChanges());

    Employee employee = new Employee();
    employee.setFirstName("John");
    employee.setLastName("Doe");

    session.store(employee);

    Assert.assertTrue(session.advanced().hasChanges());
\}
`}
</CodeBlock>
</TabItem>



## WhatChanged

Method returns all changes for each entity stored within session. Including name of the field/property that changed, its old and new value and change type. 

### Syntax

<TabItem value="what_changed_3" label="what_changed_3">
<CodeBlock language="java">
{`Map<String, List<DocumentsChanges>> whatChanged()
`}
</CodeBlock>
</TabItem>

| ReturnValue | |
| ------------- | ----- |
| Map&lt;string, DocumentsChanges[]&gt; | Dictionary containing list of changes per document key. |

### Example I

<TabItem value="what_changed_4" label="what_changed_4">
<CodeBlock language="java">
{`try (IDocumentSession session = store.openSession()) \{
    Employee employee = new Employee();
    employee.setFirstName("Joe");
    employee.setLastName("Doe");
    session.store(employee);

    Map<String, List<DocumentsChanges>> changes = session.advanced().whatChanged();
    List<DocumentsChanges> employeeChanges = changes.get("employees/1-A");
    DocumentsChanges.ChangeType change
        = employeeChanges.get(0).getChange(); // DocumentsChanges.ChangeType.DOCUMENT_ADDED

\}
`}
</CodeBlock>
</TabItem>

### Example II

<TabItem value="what_changed_5" label="what_changed_5">
<CodeBlock language="java">
{`try (IDocumentSession session = store.openSession()) \{
    Employee employee = session.load(Employee.class, "employees/1-A");// 'Joe Doe'
    employee.setFirstName("John");
    employee.setLastName("Shmoe");

    Map<String, List<DocumentsChanges>> changes = session.advanced().whatChanged();
    List<DocumentsChanges> employeeChanges = changes.get("employees/1-A");
    DocumentsChanges change1
        = employeeChanges.get(0); //DocumentsChanges.ChangeType.FIELD_CHANGED
    DocumentsChanges change2
        = employeeChanges.get(1); //DocumentsChanges.ChangeType.FIELD_CHANGED
\}
`}
</CodeBlock>
</TabItem>




