import Admonition from '@theme/Admonition';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';

<Admonition type="note" title="">

* When making a query,  
  you can request to get detailed stats of the time spent by RavenDB on each part of the query.  
  E.g. duration of search, loading documents, transforming results, total duration, etc.

* By default, the timings stats are Not included in the query results, to avoid the measuring overhead.

* __To include the query timings__ in the query results:  
  add a call to `timings()` in your query code, or add `include timings()` to an RQL query.  
  See examples below.

* In this page:
    * [Include timings in a query](../../../../client-api/session/querying/debugging/query-timings.mdx#include-timings-in-a-query)
    * [View timings](../../../../client-api/session/querying/debugging/query-timings.mdx#view-timings)
    * [Syntax](../../../../client-api/session/querying/debugging/query-timings.mdx#syntax)
    * [Timings in a sharded database](../../../../client-api/session/querying/debugging/query-timings.mdx#timings-in-a-sharded-database)

</Admonition>
## Include timings in a query

<Tabs groupId='languageSyntax'>
<TabItem value="Query" label="Query">
<CodeBlock language="java">
{`Reference<QueryTimings> timingsRef = new Reference<>();
List<Product> resultsWithTimings = session.advanced().documentQuery(Product.class)
    .timings(timingsRef)
    .search("Name", "Syrup")
    .toList();

Map<String, QueryTimings> timingsMap = timingsRef.value.getTimings();
`}
</CodeBlock>
</TabItem>
<TabItem value="RQL" label="RQL">
<CodeBlock language="sql">
{`from "Products"
where search(Name, "Syrup") or search(Name, "Lager")
include timings()
`}
</CodeBlock>
</TabItem>
</Tabs>



## View timings

* The detailed timings can be viewed from the [Query view](../../../../studio/database/queries/query-view.mdx) in the Studio.

* Running an RQL query with `include timings()` will show an additional __Timings Tab__  
  with a graphical representation of the time spent in each query part.

![Figure 1. Include timings graphical results](./assets/include-timings.png)



## Syntax

<TabItem value="timing_1" label="timing_1">
<CodeBlock language="java">
{`IDocumentQueryCustomization timings(Reference<QueryTimings> timings);
`}
</CodeBlock>
</TabItem>

The `QueryTimings` object will be filled with the timings when the query returns.  

| `QueryTimings`   |                             |                                                   |
|------------------|-----------------------------|---------------------------------------------------|
| __durationInMs__ | `long`                   | Total duration                                    |
| __timings__      | `Map<String, QueryTimings>` | Dictionary with `QueryTimings` info per time part |



## Timings in a sharded database

* In a sharded database, timings for each part are provided __per shard__.

* Learn more in [timings in a sharded database](../../../../sharding/querying.mdx#timing-queries).



