import Admonition from '@theme/Admonition';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';

<Admonition type="note" title="">

* Use `GetCompareExchangeValueOperation` to return the saved compare-exchange _Value_ for the specified _Key_.  

* For an overview of the 'Compare Exchange' feature click: [Compare Exchange Overview](../../../client-api/operations/compare-exchange/overview.mdx)

* In this page:  
  * [Syntax](../../../client-api/operations/compare-exchange/get-compare-exchange-value.mdx#syntax)  
  * [Example I - Value is 'long'](../../../client-api/operations/compare-exchange/get-compare-exchange-value.mdx#example-i---value-is-)  
  * [Example II - Value is a custom object](../../../client-api/operations/compare-exchange/get-compare-exchange-value.mdx#example-ii---value-is-a-custom-object)  
</Admonition>
## Syntax

**Method**:
<TabItem value="get_0" label="get_0">
<CodeBlock language="csharp">
{`public GetCompareExchangeValueOperation(string key)
`}
</CodeBlock>
</TabItem>

**Returned object**:
<TabItem value="compare_exchange_value" label="compare_exchange_value">
<CodeBlock language="csharp">
{`public class CompareExchangeValue<T>
\{
    public readonly string Key;
    public readonly T Value;
    public readonly long Index;
\}
`}
</CodeBlock>
</TabItem>

| Parameter | Type   | Description                                                              |
|-----------|--------|--------------------------------------------------------------------------|
| **Key**   | string | The unique object identifier                                             |
| **Value** | `T`    | The existing value that _Key_ has                                        |
| **Index** | long   | The version number of the _Value_ that is stored for the specified _Key_ |

<Admonition type="info" title="Session Interface and Lazy Get" id="session-interface-and-lazy-get" href="#session-interface-and-lazy-get">
You can also get compare exchange values through the [session cluster transactions](../../../client-api/session/cluster-transaction/compare-exchange.mdx#get-compare-exchange) 
at `session.Advanced.ClusterTransaction`.  

This method also exposes methods getting compare exchange [lazily](../../../client-api/session/cluster-transaction/compare-exchange.mdx#get-compare-exchange).  
</Admonition>



## Example I - Value is 'long' 
<TabItem value="get_1" label="get_1">
<CodeBlock language="csharp">
{`CompareExchangeValue<long> readResult =
    store.Operations.Send(new GetCompareExchangeValueOperation<long>("NextClientId"));

long value = readResult.Value;
`}
</CodeBlock>
</TabItem>


## Example II - Value is a custom object 
<TabItem value="get_2" label="get_2">
<CodeBlock language="csharp">
{`CompareExchangeValue<User> readResult =
    store.Operations.Send(new GetCompareExchangeValueOperation<User>("AdminUser"));

User admin = readResult.Value;
`}
</CodeBlock>
</TabItem>



