import Admonition from '@theme/Admonition';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';

**Highlighting** can be a great feature for increasing search UX. To take leverage of it use `Highlight` method.

## Syntax

<TabItem value="highlight_1" label="highlight_1">
<CodeBlock language="csharp">
{`// Make a full-text search dynamic query:
// ======================================
List<Employee> employeesResults = session
     // Make a dynamic query on 'Employees' collection
    .Query<Employee>()
     // Search for documents containing the term 'sales' in their 'Notes' field
    .Search(x => x.Notes, "sales")
     // Request to highlight the searched term by calling 'Highlight'
    .Highlight(
        x => x.Notes, // The document-field name in which we search
        35,           // Max length of each text fragment
        4,            // Max number of fragments to return per document
        out Highlightings salesHighlights) // An out param for getting the highlighted text fragments
     // Execute the query
    .ToList();
`}
</CodeBlock>
</TabItem>

| Parameters | | |
| ------------- | ------------- | ----- |
| **fieldName** | string | Name of a field to highlight. |
| **path** | `Expression<Func<T, object>>` | Path to a field to highlight. |
| **fragmentLength** | int | Maximum length of text fragments that will be returned. |
| **fragmentCount** | int | Maximum number of fragments that will be returned. |
| **options** | `HighlightingOptions`  | Options that can be used for customization. |
| **highlightings** | `Highlightings` | Instance of a Highlightings that contains the highlight fragments for each returned result. |

### Options

<TabItem value="options" label="options">
<CodeBlock language="csharp">
{`public string GroupKey \{ get; set; \}

public string[] PreTags \{ get; set; \}

public string[] PostTags \{ get; set; \}
`}
</CodeBlock>
</TabItem>

| Options | | |
| ------------- | ------------- | ----- |
| **GroupKey** | string | Grouping key for the results. If `null` results are grouped by document ID (default). |
| **PreTags** | `string[]` | Array of pre tags used when highlighting. |
| **PostTags** | `string[]` | Array of post tags used when highlighting. |

## Example

<Tabs groupId='languageSyntax'>
<TabItem value="Sync" label="Sync">
<CodeBlock language="csharp">
{`List<SearchItem> results = session
    .Query<SearchItem, ContentSearchIndex>()
    .Highlight(x => x.Text, 128, 1, out Highlightings highlightings)
    .Search(x => x.Text, "raven")
    .ToList();

StringBuilder builder = new StringBuilder()
    .AppendLine("<ul>");

foreach (SearchItem result in results)
{
    string[] fragments = highlightings.GetFragments(result.Id);
    builder.AppendLine($"<li>{fragments.First()}</li>");
}

string ul = builder
    .AppendLine("</ul>")
    .ToString();
`}
</CodeBlock>
</TabItem>
<TabItem value="Async" label="Async">
<CodeBlock language="csharp">
{`List<SearchItem> results = await asyncSession
    .Query<SearchItem, ContentSearchIndex>()
    .Highlight(x => x.Text, 128, 1, out Highlightings highlightings)
    .Search(x => x.Text, "raven")
    .ToListAsync();

StringBuilder builder = new StringBuilder()
    .AppendLine("<ul>");

foreach (SearchItem result in results)
{
    string[] fragments = highlightings.GetFragments(result.Id);
    builder.AppendLine($"<li>{fragments.First()}</li>");
}

string ul = builder
    .AppendLine("</ul>")
    .ToString();
`}
</CodeBlock>
</TabItem>
<TabItem value="RQL" label="RQL">
<CodeBlock language="sql">
{`from index 'ContentSearchIndex'
where search(Text, 'raven')
include highlight(Text, 128, 1)
`}
</CodeBlock>
</TabItem>
</Tabs>

## Remarks

<Admonition type="note" title="Note" id="note" href="#note">
Default `<b></b>` tags are coloured and colours are returned in following order:

- &lt;span style="border-left: 10px solid yellow"&gt;&nbsp;&lt;/span&gt;yellow,
- &lt;span style="border-left: 10px solid lawngreen"&gt;&nbsp;&lt;/span&gt;lawngreen,
- &lt;span style="border-left: 10px solid aquamarine"&gt;&nbsp;&lt;/span&gt;aquamarine,
- &lt;span style="border-left: 10px solid magenta"&gt;&nbsp;&lt;/span&gt;magenta,
- &lt;span style="border-left: 10px solid palegreen"&gt;&nbsp;&lt;/span&gt;palegreen,
- &lt;span style="border-left: 10px solid coral"&gt;&nbsp;&lt;/span&gt;coral,
- &lt;span style="border-left: 10px solid wheat"&gt;&nbsp;&lt;/span&gt;wheat,
- &lt;span style="border-left: 10px solid khaki"&gt;&nbsp;&lt;/span&gt;khaki,
- &lt;span style="border-left: 10px solid lime"&gt;&nbsp;&lt;/span&gt;lime,
- &lt;span style="border-left: 10px solid deepskyblue"&gt;&nbsp;&lt;/span&gt;deepskyblue,
- &lt;span style="border-left: 10px solid deeppink"&gt;&nbsp;&lt;/span&gt;deeppink,
- &lt;span style="border-left: 10px solid salmon"&gt;&nbsp;&lt;/span&gt;salmon,
- &lt;span style="border-left: 10px solid peachpuff"&gt;&nbsp;&lt;/span&gt;peachpuff,
- &lt;span style="border-left: 10px solid violet"&gt;&nbsp;&lt;/span&gt;violet,
- &lt;span style="border-left: 10px solid mediumpurple"&gt;&nbsp;&lt;/span&gt;mediumpurple,
- &lt;span style="border-left: 10px solid palegoldenrod"&gt;&nbsp;&lt;/span&gt;palegoldenrod,
- &lt;span style="border-left: 10px solid darkkhaki"&gt;&nbsp;&lt;/span&gt;darkkhaki,
- &lt;span style="border-left: 10px solid springgreen"&gt;&nbsp;&lt;/span&gt;springgreen,
- &lt;span style="border-left: 10px solid turquoise"&gt;&nbsp;&lt;/span&gt;turquoise,
- &lt;span style="border-left: 10px solid powderblue"&gt;&nbsp;&lt;/span&gt;powderblue
</Admonition>


