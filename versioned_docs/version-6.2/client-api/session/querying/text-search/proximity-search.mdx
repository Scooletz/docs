---
title: "Proximity Search"
sidebar_label: Proximity Search
sidebar_position: 6
---

import Admonition from '@theme/Admonition';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';
import LanguageSwitcher from "@site/src/components/language-switcher";
import LanguageContent from "@site/src/components/language-content";

export const supportedLanguages = ["csharp", "java", "python", "php", "nodejs"];


# Proximity Search
<LanguageSwitcher supportedLanguages={supportedLanguages} />
<LanguageContent language="csharp">

<Admonition type="note" title="Note">

* A **proximity search** retrieves documents containing search terms that are located within a specified distance from each other.
  The distance is measured by the number of intermediate terms.

* Proximity search is available only via [DocumentQuery](../../../../client-api/session/querying/document-query/what-is-document-query) or RQL.  
 
* Use the `Proximity` method when running a **full-text search** by the [Search](../../../../client-api/session/querying/text-search/full-text-search) method.  

* In this page:
    * [Why use proximity search](../../../../client-api/session/querying/text-search/proximity-search#why-use-proximity-search)
    * [How proximity works](../../../../client-api/session/querying/text-search/proximity-search#how-proximity-works)
    * [Proximity search examples](../../../../client-api/session/querying/text-search/proximity-search#proximity-search-examples)
    * [Syntax](../../../../client-api/session/querying/text-search/proximity-search#syntax)

</Admonition>
## Why use proximity search

* A basic linguistic assumption is that the proximity of words implies a relationship between them.

* Proximity search helps match phrases while avoiding scattered or spread-out terms in the text.

* By limiting the search to only include matches where the terms are within the specified maximum proximity,  
  the search results can be more relevant than those with scattered terms.



## How proximity works

* When searching with some specified distance between search terms `term1` and `term2`:

    * Retrieved documents will contain text in which `term1` and `term2` are separated by  
      the maximum number of terms specified or less.

    * The search terms can be separated by fewer terms, but not more than the specified distance.

    * Only the terms generated by the [search analyzer](../../../../indexes/using-analyzers#ravendb) 
      are considered towards the count of the maximum distance.  
      Words or tokens that are Not part of the generated terms are Not included in the proximity calculation.

* Note:

    * Search criteria should contain at least 2 search terms.

    * Search terms must be simple string terms without wildcards.



## Proximity search examples

## Proximity search (0 distance)

<Tabs groupId='languageSyntax'>
<TabItem value="DocumentQuery" label="DocumentQuery">
<CodeBlock language="csharp">
{`List<Employee> employees = session.Advanced
    .DocumentQuery<Employee>()
     // Make a full-text search with search terms
    .Search(x => x.Notes,"fluent french")
     // Call 'Proximity' with 0 distance
    .Proximity(0)
    .ToList();

// Running the above query on the Northwind sample data returns the following Employee documents:
// * employees/2-A
// * employees/5-A
// * employees/9-A

// Each resulting document has the text 'fluent in French' in its 'Notes' field.
//
// The word "in" is not taken into account as it is Not part of the terms list generated
// by the analyzer. (Search is case-insensitive in this case).
//
// Note:
// A document containing text with the search terms appearing with no words in between them
// (e.g. "fluent french") would have also been returned.
`}
</CodeBlock>
</TabItem>
<TabItem value="DocumentQuery_async" label="DocumentQuery_async">
<CodeBlock language="csharp">
{`List<Employee> employees = await asyncSession.Advanced
    .AsyncDocumentQuery<Employee>()
     // Make a full-text search with search terms
    .Search(x => x.Notes,"fluent french")
     // Call 'Proximity' with 0 distance
    .Proximity(0)
    .ToListAsync();

// Running the above query on the Northwind sample data returns the following Employee documents:
// * employees/2-A
// * employees/5-A
// * employees/9-A

// Each resulting document has the text 'fluent in French' in its 'Notes' field.
//
// The word "in" is not taken into account as it is Not part of the terms list generated
// by the analyzer. (Search is case-insensitive in this case).
//
// Note:
// A document containing text with the search terms appearing with no words in between them
// (e.g. "fluent french") would have also been returned.
`}
</CodeBlock>
</TabItem>
<TabItem value="RQL" label="RQL">
<CodeBlock language="sql">
{`from "Employees"
where proximity(search(Notes, "fluent french"), 0)
`}
</CodeBlock>
</TabItem>
</Tabs>

## Proximity search (distance &gt; 0)

<Tabs groupId='languageSyntax'>
<TabItem value="DocumentQuery" label="DocumentQuery">
<CodeBlock language="csharp">
{`List<Employee> employees = session.Advanced
    .DocumentQuery<Employee>()
     // Make a full-text search with search terms
    .Search(x => x.Notes,"fluent french")
     // Call 'Proximity' with distance 5
    .Proximity(4)
    .ToList();

// Running the above query on the Northwind sample data returns the following Employee documents:
// * employees/2-A
// * employees/5-A
// * employees/6-A
// * employees/9-A

// This time document 'employees/6-A' was added to the previous results since it contains the phrase:
// "fluent in Japanese and can read and write French"
// where the search terms are separated by a count of 4 terms.
//
// "in" & "and" are not taken into account as they are not part of the terms list generated
// by the analyzer.(Search is case-insensitive in this case).
`}
</CodeBlock>
</TabItem>
<TabItem value="DocumentQuery_async" label="DocumentQuery_async">
<CodeBlock language="csharp">
{`List<Employee> employees = await asyncSession.Advanced
    .AsyncDocumentQuery<Employee>()
     // Make a full-text search with search terms
    .Search(x => x.Notes,"fluent french")
     // Call 'Proximity' with distance 5
    .Proximity(4)
    .ToListAsync();

// Running the above query on the Northwind sample data returns the following Employee documents:
// * employees/2-A
// * employees/5-A
// * employees/6-A
// * employees/9-A

// This time document 'employees/6-A' was added to the previous results since it contains the phrase:
// "fluent in Japanese and can read and write French"
// where the search terms are separated by a count of 4 terms.
//
// "in" & "and" are not taken into account as they are not part of the terms list generated
// by the analyzer.(Search is case-insensitive in this case).
`}
</CodeBlock>
</TabItem>
<TabItem value="RQL" label="RQL">
<CodeBlock language="sql">
{`from "Employees"
where proximity(search(Notes, "fluent french"), 5)
`}
</CodeBlock>
</TabItem>
</Tabs>



## Syntax

<TabItem value="something" label="syntax">
<CodeBlock language="csharp">
{`IDocumentQuery<T> Proximity(int proximity);
`}
</CodeBlock>
</TabItem>

| Parameter     | Type  | Description                                                                              |
|---------------|-------|------------------------------------------------------------------------------------------|
| **proximity** | `int` | The maximum number of terms between the search terms.<br/>Can be greater or equal to `0`. |




</LanguageContent>
<LanguageContent language="java">


To find words within a specific distance away use `proximity` method.  
This method is available only from [DocumentQuery](../../../../client-api/session/querying/document-query/what-is-document-query) level and can only be used right after `search` method.

## Syntax

<TabItem value="something-something" label="proximity_1">
<CodeBlock language="java">
{`IDocumentQuery<T> proximity(int proximity);
`}
</CodeBlock>
</TabItem>

| Parameters | | |
| ------------- | ------------- | ----- |
| **proximity** | `int` | Number of words within. |

## Example

<Tabs groupId='languageSyntax'>
<TabItem value="Java" label="Java">
<CodeBlock language="java">
{`session
    .advanced()
    .documentQuery(Fox.class)
    .search("name", "quick fox")
    .proximity(2)
    .toList();
`}
</CodeBlock>
</TabItem>
<TabItem value="RQL" label="RQL">
<CodeBlock language="sql">
{`from Foxes
where proximity(search(Name, 'quick fox'), 2)
`}
</CodeBlock>
</TabItem>
</Tabs>


</LanguageContent>
<LanguageContent language="python">

<Admonition type="note" title="Note">

* A **proximity search** retrieves documents containing search terms that are located within a specified distance from each other.
  The distance is measured by the number of intermediate terms.

* Use the `proximity` method when running a **full-text search** by the [search](../../../../client-api/session/querying/text-search/full-text-search) method.  

* In this page:
    * [Why use proximity search](../../../../client-api/session/querying/text-search/proximity-search#why-use-proximity-search)
    * [How proximity works](../../../../client-api/session/querying/text-search/proximity-search#how-proximity-works)
    * [Proximity search examples](../../../../client-api/session/querying/text-search/proximity-search#proximity-search-examples)
    * [Syntax](../../../../client-api/session/querying/text-search/proximity-search#syntax)

</Admonition>
## Why use proximity search

* A basic linguistic assumption is that the proximity of words implies a relationship between them.

* Proximity search helps match phrases while avoiding scattered or spread-out terms in the text.

* By limiting the search to only include matches where the terms are within the specified maximum proximity,  
  the search results can be more relevant than those with scattered terms.



## How proximity works

* When searching with some specified distance between search terms `term1` and `term2`:

    * Retrieved documents will contain text in which `term1` and `term2` are separated by  
      the maximum number of terms specified or less.

    * The search terms can be separated by fewer terms, but not more than the specified distance.

    * Only the terms generated by the [search analyzer](../../../../indexes/using-analyzers#ravendb) 
      are considered towards the count of the maximum distance.  
      Words or tokens that are Not part of the generated terms are Not included in the proximity calculation.

* Note:

    * Search criteria should contain at least 2 search terms.

    * Search terms must be simple string terms without wildcards.



## Proximity search examples

## Proximity search (0 distance)

<Tabs groupId='languageSyntax'>
<TabItem value="Query" label="Query">
<CodeBlock language="python">
{`employees = list(
    session.advanced.document_query(object_type=Employee)
    # Make a full-text search with search terms
    .search("Notes", "fluent french")
    # Call 'proximity' with 0 distance
    .proximity(0)
)
# Running the above query on the Northwind sample data returns the following Employee documents:
# * employees/2-A
# * employees/5-A
# * employees/9-A
#
# Each resulting document has the text 'fluent in French' in its 'Notes' field.
#
# The word "in" is not taken into account as it is Not part of the terms list generated
# by the analyzer. (Search is case-insensitive in this case).
#
# Note:
# A document containing text with the search terms appearing with no words in between them
# (e.g. "fluent french") would have also been returned.
`}
</CodeBlock>
</TabItem>
<TabItem value="RQL" label="RQL">
<CodeBlock language="sql">
{`from "Employees"
where proximity(search(Notes, "fluent french"), 0)
`}
</CodeBlock>
</TabItem>
</Tabs>


## Proximity search (distance &gt; 0)

<Tabs groupId='languageSyntax'>
<TabItem value="Query" label="Query">
<CodeBlock language="python">
{`employees = list(
    session.advanced.document_query(object_type=Employee)
    # Make a full-text search with search terms
    .search("Notes", "fluent french")
    # Call 'proximity' with 0 distance
    .proximity(4)
)
# Running the above query on the Northwind sample data returns the following Employee documents:
# * employees/2-A
# * employees/5-A
# * employees/6-A
# * employees/9-A
#
# This time document 'employees/6-A' was added to the previous results since it contains the phrase:
# "fluent in Japanese and can read and write French"
# where the search terms are separated by a count of 4 terms.
#
# "in" & "and" are not taken into account as they are not part of the terms list generated
# by the analyzer.(Search is case-insensitive in this case).
`}
</CodeBlock>
</TabItem>
<TabItem value="RQL" label="RQL">
<CodeBlock language="sql">
{`from "Employees"
where proximity(search(Notes, "fluent french"), 5)
`}
</CodeBlock>
</TabItem>
</Tabs>



## Syntax

<TabItem value="something-something" label="syntax">
<CodeBlock language="python">
{`def proximity(self, proximity: int) -> DocumentQuery[_T]: ...
`}
</CodeBlock>
</TabItem>

| Parameter     | Type  | Description                                                                              |
|---------------|-------|------------------------------------------------------------------------------------------|
| **proximity** | `int` | The maximum number of terms between the search terms.<br/>Can be greater or equal to `0`. |




</LanguageContent>
<LanguageContent language="php">

<Admonition type="note" title="Note">

* A **proximity search** retrieves documents containing search terms that are located within a specified distance from each other.
  The distance is measured by the number of intermediate terms.

* Use the `proximity` method when running a **full-text search** by the [search](../../../../client-api/session/querying/text-search/full-text-search) method.  

* In this page:
    * [Why use proximity search](../../../../client-api/session/querying/text-search/proximity-search#why-use-proximity-search)
    * [How proximity works](../../../../client-api/session/querying/text-search/proximity-search#how-proximity-works)
    * [Proximity search examples](../../../../client-api/session/querying/text-search/proximity-search#proximity-search-examples)
    * [Syntax](../../../../client-api/session/querying/text-search/proximity-search#syntax)

</Admonition>
## Why use proximity search

* A basic linguistic assumption is that the proximity of words implies a relationship between them.

* Proximity search helps match phrases while avoiding scattered or spread-out terms in the text.

* By limiting the search to only include matches where the terms are within the specified maximum proximity,  
  the search results can be more relevant than those with scattered terms.



## How proximity works

* When searching with some specified distance between search terms `term1` and `term2`:

    * Retrieved documents will contain text in which `term1` and `term2` are separated by  
      the maximum number of terms specified or less.

    * The search terms can be separated by fewer terms, but not more than the specified distance.

    * Only the terms generated by the [search analyzer](../../../../indexes/using-analyzers#ravendb) 
      are considered towards the count of the maximum distance.  
      Words or tokens that are Not part of the generated terms are Not included in the proximity calculation.

* Note:

    * Search criteria should contain at least 2 search terms.

    * Search terms must be simple string terms without wildcards.



## Proximity search examples

## Proximity search (0 distance)

<Tabs groupId='languageSyntax'>
<TabItem value="Query" label="Query">
<CodeBlock language="php">
{`/** @var array<Employee> $employees */
$employees = $session->advanced()
    ->documentQuery(Employee::class)
    // Make a full-text search with search terms
    ->search("Notes", "fluent french")
    // Call 'Proximity' with 0 distance
    ->proximity(0)
    ->toList();
`}
</CodeBlock>
</TabItem>
<TabItem value="RQL" label="RQL">
<CodeBlock language="sql">
{`from "Employees"
where proximity(search(Notes, "fluent french"), 0)
`}
</CodeBlock>
</TabItem>
</Tabs>

Running the above query on the Northwind sample data returns the following Employee documents:
`employees/2-A`  
`employees/5-A`  
`employees/9-A`  

Each resulting document has the text 'fluent in French' in its 'Notes' field.

The word "in" is not taken into account as it is Not part of the terms list generated
by the analyzer. (Search is case-insensitive in this case.)

<Admonition type="note" title="Note">
Documents containing text with the search terms appearing with no words between them
(e.g. "fluent french") will also be returned.
</Admonition>

## Proximity search (distance &gt; 0)

<Tabs groupId='languageSyntax'>
<TabItem value="Query" label="Query">
<CodeBlock language="php">
{`/** @var array<Employee> $employees */
$employees = $session->advanced()
    ->documentQuery(Employee::class)
    // Make a full-text search with search terms
    ->search("Notes", "fluent french")
    // Call 'Proximity' with distance 5
    ->proximity(4)
    ->toList();
`}
</CodeBlock>
</TabItem>
<TabItem value="RQL" label="RQL">
<CodeBlock language="sql">
{`from "Employees"
where proximity(search(Notes, "fluent french"), 5)
`}
</CodeBlock>
</TabItem>
</Tabs>

Running the above query on the Northwind sample data returns the following Employee documents:
`employees/2-A`  
`employees/5-A`  
`employees/6-A`  
`employees/9-A`  

This time document 'employees/6-A' was added to the previous results since it contains the phrase:
"fluent in Japanese and can read and write French"
where the search terms are separated by a count of 4 terms.

"in" & "and" are not taken into account as they are not part of the terms list generated
by the analyzer.(Search is case-insensitive in this case).
                


## Syntax

<TabItem value="something-something" label="syntax">
<CodeBlock language="php">
{`public function proximity(int $proximity): DocumentQueryInterface;
`}
</CodeBlock>
</TabItem>

| Parameter     | Type  | Description                                                                   |
|---------------|-------|-------------------------------------------------------------------------------|
| **$proximity** | `int` | The maximum number of terms between the search terms.<br/>Can be `0` or more. |




</LanguageContent>
<LanguageContent language="nodejs">

<Admonition type="note" title="Note">

* A __proximity search__ retrieves documents containing search terms that are located within a specified distance from each other.
  The distance is measured by the number of intermediate terms.
 
* Use the `proximity` method when running a __full-text search__ by the [search](../../../../client-api/session/querying/text-search/full-text-search) method.

* In this page:
    * [Why use proximity search](../../../../client-api/session/querying/text-search/proximity-search#why-use-proximity-search)
    * [How proximity works](../../../../client-api/session/querying/text-search/proximity-search#how-proximity-works)
    * [Proximity search examples](../../../../client-api/session/querying/text-search/proximity-search#proximity-search-examples)
    * [Syntax](../../../../client-api/session/querying/text-search/proximity-search#syntax)

</Admonition>
## Why use proximity search

* A basic linguistic assumption is that the proximity of words implies a relationship between them.  

* Proximity search helps match phrases while avoiding scattered or spread-out terms in the text.

* By limiting the search to only include matches where the terms are within the specified maximum proximity,  
  the search results can be more relevant than those with scattered terms.



## How proximity works

* When searching with some specified distance between search terms `term1` and `term2`:

    * Retrieved documents will contain text in which `term1` and `term2` are separated by  
      the maximum number of terms specified or less.

    * The search terms can be separated by fewer terms, but not more than the specified distance.

    * Only the terms generated by the [search analyzer](../../../../indexes/using-analyzers#ravendb) 
      are considered towards the count of the maximum distance.  
      Words or tokens that are Not part of the generated terms are Not included in the proximity calculation.

* Note:

    * Search criteria should contain at least 2 search terms.

    * Search terms must be simple string terms without wildcards.



## Proximity search examples

<Admonition type="note" title="Note">

__Proximity search (0 distance)__

<Tabs groupId='languageSyntax'>
<TabItem value="Query" label="Query">
<CodeBlock language="nodejs">
{`const employees = await session
    .query({ collection: "Employees" })
     // Make a full-text search with search terms
    .search("Notes", "fluent french")
     // Call 'proximity' with 0 distance
    .proximity(0)
    .all();

// Running the above query on the Northwind sample data returns the following Employee documents:
// * employees/2-A
// * employees/5-A
// * employees/9-A

// Each resulting document has the text 'fluent in French' in its 'Notes' field.
//
// The word "in" is not taken into account as it is Not part of the terms list generated
// by the analyzer. (Search is case-insensitive in this case).
//
// Note:
// A document containing text with the search terms appearing with no words in between them
// (e.g. "fluent french") would have also been returned.
`}
</CodeBlock>
</TabItem>
<TabItem value="RQL" label="RQL">
<CodeBlock language="sql">
{`from "Employees"
where proximity(search(Notes, "fluent french"), 0)
`}
</CodeBlock>
</TabItem>
</Tabs>

</Admonition>

<Admonition type="note" title="Note">

__Proximity search (distance &gt; 0)__

<Tabs groupId='languageSyntax'>
<TabItem value="Query" label="Query">
<CodeBlock language="nodejs">
{`const employees = await session
    .query({ collection: "Employees" })
     // Make a full-text search with search terms
    .search("Notes, "fluent french")
     // Call 'proximity' with distance 5
    .proximity(5)
    .all();

// Running the above query on the Northwind sample data returns the following Employee documents:
// * employees/2-A
// * employees/5-A
// * employees/6-A
// * employees/9-A

// This time document 'employees/6-A' was added to the previous results since it contains the phrase:
// "fluent in Japanese and can read and write French"
// where the search terms are separated by a count of 4 terms.
//
// "in" & "and" are not taken into account as they are not part of the terms list generated
// by the analyzer.(Search is case-insensitive in this case).
`}
</CodeBlock>
</TabItem>
<TabItem value="RQL" label="RQL">
<CodeBlock language="sql">
{`from "Employees"
where proximity(search(Notes, "fluent french"), 5)
`}
</CodeBlock>
</TabItem>
</Tabs>

</Admonition>



## Syntax

<TabItem value="something-something" label="syntax">
<CodeBlock language="nodejs">
{`proximity(proximity);
`}
</CodeBlock>
</TabItem>

| Parameter     | Type     | Description                                                                                |
|---------------|----------|--------------------------------------------------------------------------------------------|
| __proximity__ | `number` | The maximum number of terms between the search terms.<br/>Can be greater or equal to `0`.   |




</LanguageContent>