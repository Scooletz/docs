---
title: "Ongoing Task Operations"
hide_table_of_contents: true
sidebar_label: Ongoing Task Operations
sidebar_position: 0
---

import Admonition from '@theme/Admonition';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';
import LanguageSwitcher from "@site/src/components/LanguageSwitcher";
import LanguageContent from "@site/src/components/LanguageContent";

export const supportedLanguages = ["csharp"];


# Ongoing Task Operations
<LanguageSwitcher supportedLanguages={supportedLanguages} />
<LanguageContent language="csharp">

<Admonition type="note" title="">

* Once an ongoing task is created, it can be managed via the Client API [Operations](../../../../client-api/operations/what-are-operations.mdx).   
  You can get task info, toggle the task state (enable, disable), or delete the task. 

* Ongoing tasks can also be managed via the [Tasks list view](../../../../studio/database/tasks/ongoing-tasks/general-info.mdx#ongoing-tasks---view) in the Studio.

* In this page:
  * [Get ongoing task info](../../../../client-api/operations/maintenance/ongoing-tasks/ongoing-task-operations.mdx#get-ongoing-task-info)
  * [Delete ongoing task](../../../../client-api/operations/maintenance/ongoing-tasks/ongoing-task-operations.mdx#delete-ongoing-task)
  * [Toggle ongoing task state](../../../../client-api/operations/maintenance/ongoing-tasks/ongoing-task-operations.mdx#toggle-ongoing-task-state)
  * [Syntax](../../../../client-api/operations/maintenance/ongoing-tasks/ongoing-task-operations.mdx#syntax)

</Admonition>

## Get ongoing task info

For the examples in this article, let's create a simple external replication ongoing task:

<TabItem value="create_task" label="create_task">
<CodeBlock language="csharp">
{`// Define a simple External Replication task
var taskDefintion = new ExternalReplication
\{
    Name = "MyExtRepTask",
    ConnectionStringName = "MyConnectionStringName"
\};

// Deploy the task to the server
var taskOp = new UpdateExternalReplicationOperation(taskDefintion);
var sendResult = store.Maintenance.Send(taskOp);

// The task ID is available in the send result
var taskId = sendResult.TaskId;
`}
</CodeBlock>
</TabItem>
Use `GetOngoingTaskInfoOperation` to get information about an ongoing task.

<Tabs groupId='languageSyntax'>
<TabItem value="Sync" label="Sync">
<CodeBlock language="csharp">
{`// Define the get task operation, pass:
// * The ongoing task ID or the task name
// * The task type 
var getTaskInfoOp = new GetOngoingTaskInfoOperation(taskId, OngoingTaskType.Replication);

// Execute the operation by passing it to Maintenance.Send
var taskInfo = (OngoingTaskReplication)store.Maintenance.Send(getTaskInfoOp);

// Access the task info
var taskState = taskInfo.TaskState;
var taskDelayTime = taskInfo.DelayReplicationFor;
var destinationUrls= taskInfo.TopologyDiscoveryUrls;
// ...
`}
</CodeBlock>
</TabItem>
<TabItem value="Async" label="Async">
<CodeBlock language="csharp">
{`var getTaskInfoOp = new GetOngoingTaskInfoOperation(taskId, OngoingTaskType.Replication);
var taskInfo = (OngoingTaskReplication) await store.Maintenance.SendAsync(getTaskInfoOp);

var taskState = taskInfo.TaskState;
var taskDelayTime = taskInfo.DelayReplicationFor;
var destinationUrls= taskInfo.TopologyDiscoveryUrls;
// ...
`}
</CodeBlock>
</TabItem>
</Tabs>



## Delete ongoing task

Use `DeleteOngoingTaskOperation` to remove an ongoing task from the list of tasks assigned to the database.

<Tabs groupId='languageSyntax'>
<TabItem value="Sync" label="Sync">
<CodeBlock language="csharp">
{`// Define the delete task operation, pass:
// * The ongoing task ID
// * The task type 
var deleteTaskOp = new DeleteOngoingTaskOperation(taskId, OngoingTaskType.Replication);

// Execute the operation by passing it to Maintenance.Send
store.Maintenance.Send(deleteTaskOp);
`}
</CodeBlock>
</TabItem>
<TabItem value="Async" label="Async">
<CodeBlock language="csharp">
{`var deleteTaskOp = new DeleteOngoingTaskOperation(taskId, OngoingTaskType.Replication);
await store.Maintenance.SendAsync(deleteTaskOp);
`}
</CodeBlock>
</TabItem>
</Tabs>



## Toggle ongoing task state

Use `ToggleOngoingTaskStateOperation` to enable/disable the task state.

<Tabs groupId='languageSyntax'>
<TabItem value="Sync" label="Sync">
<CodeBlock language="csharp">
{`// Define the delete task operation, pass:
// * The ongoing task ID
// * The task type
// * A boolean value to enable/disable
var toggleTaskOp = new ToggleOngoingTaskStateOperation(taskId, OngoingTaskType.Replication, true);

// Execute the operation by passing it to Maintenance.Send
store.Maintenance.Send(toggleTaskOp);
`}
</CodeBlock>
</TabItem>
<TabItem value="Async" label="Async">
<CodeBlock language="csharp">
{`var toggleTaskOp = new ToggleOngoingTaskStateOperation(taskId, OngoingTaskType.Replication, true);
await store.Maintenance.SendAsync(toggleTaskOp);
`}
</CodeBlock>
</TabItem>
</Tabs>



## Syntax

<TabItem value="syntax_1" label="syntax_1">
<CodeBlock language="csharp">
{`// Get
public GetOngoingTaskInfoOperation(long taskId, OngoingTaskType type);
public GetOngoingTaskInfoOperation(string taskName, OngoingTaskType type);
`}
</CodeBlock>
</TabItem>

<TabItem value="syntax_2" label="syntax_2">
<CodeBlock language="csharp">
{`// Delete
public DeleteOngoingTaskOperation(long taskId, OngoingTaskType taskType);
`}
</CodeBlock>
</TabItem>

<TabItem value="syntax_3" label="syntax_3">
<CodeBlock language="csharp">
{`// Toggle
public ToggleOngoingTaskStateOperation(long taskId, OngoingTaskType type, bool disable);
`}
</CodeBlock>
</TabItem>

| Parameter    | Type              | Description                                            |
|--------------|-------------------|--------------------------------------------------------|
| **taskId**   | `long`            | Task ID                                                |
| **taskName** | `string`          | Task name                                              |
| **taskType** | `OngoingTaskType` | Task type                                              |
| **disable**  | `bool`            | `true` - disable the task<br/>`false` - enable the task |

<TabItem value="syntax_4" label="syntax_4">
<CodeBlock language="csharp">
{`private enum OngoingTaskType
\{
    Replication,
    RavenEtl,
    SqlEtl,
    OlapEtl,
    ElasticSearchEtl,
    QueueEtl,
    Backup,
    Subscription,
    PullReplicationAsHub,
    PullReplicationAsSink,
    QueueSink,
\}
`}
</CodeBlock>
</TabItem>

<br/> 

| Return value of `store.Maintenance.Send(GetOngoingTaskInfoOperation)`   |                                        |
|-------------------------------------------------------------------------|----------------------------------------|
| `OngoingTaskReplication`                                                | Object with information about the task |

<TabItem value="syntax_5" label="syntax_5">
<CodeBlock language="csharp">
{`public sealed class OngoingTaskReplication : OngoingTask
\{
    public OngoingTaskReplication() => this.TaskType = OngoingTaskType.Replication;
    public string DestinationUrl \{ get; set; \}
    public string[] TopologyDiscoveryUrls \{ get; set; \}
    public string DestinationDatabase \{ get; set; \}
    public string ConnectionStringName \{ get; set; \}
    public TimeSpan DelayReplicationFor \{ get; set; \}
\}
`}
</CodeBlock>
</TabItem>



</LanguageContent>

<!---

-->