import Admonition from '@theme/Admonition';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';

<Admonition type="note" title="">

* When querying with some filtering conditions,  
  a basic score is calculated for each document in the results by the underlying engine.

* In order to prioritize results,  
  you can provide a __boost value__ to the searched terms which will be integrated with the basic score.

* Usually, the higher the boost value, the more relevant the term will be,  
  resulting in a higher ranking of its matching document in the results.

* In this page:

  * [Boost results - when making a full-text search](../../../../client-api/session/querying/text-search/boost-search-results.mdx#boost-results---when-making-a-full-text-search)
  * [Boost results - when querying with where clause](../../../../client-api/session/querying/text-search/boost-search-results.mdx#boost-results---when-querying-with-where-clause)  
  * [Get resulting score](../../../../client-api/session/querying/text-search/boost-search-results.mdx#get-resulting-score)

</Admonition>
## Boost results - when making a full-text search

<Admonition type="note" title="">

<Tabs groupId='languageSyntax'>
<TabItem value="Query" label="Query">
<CodeBlock language="js">
{`const employees = await session
     // Make a dynamic full-text search Query on 'Employees' collection
    .query({ collection: "Employees"})
     // This search predicate will use the default boost value of 1
    .search('Notes', 'English')
     // This search predicate will use a boost value of 10 
    .search('Notes', 'Italian')
     // Call 'boost' to set the boost value of the previous 'search' call
    .boost(10)
    .all();

// * Results will contain all Employee documents that have
//   EITHER 'English' OR 'Italian' in their 'Notes' field.
//
// * Matching documents with 'Italian' will be listed FIRST in the results,
//   before those with 'English'.
// 
// * Search is case-insensitive.
`}
</CodeBlock>
</TabItem>
<TabItem value="RQL" label="RQL">
<CodeBlock language="sql">
{`from "Employees" where
search(Notes, "English") or boost(search(Notes, "Italian"), 10)
{"p0":"English","p1":"Italian"}
`}
</CodeBlock>
</TabItem>
</Tabs>

</Admonition>



## Boost results - when querying with where clause

<Admonition type="note" title="">

<Tabs groupId='languageSyntax'>
<TabItem value="Query" label="Query">
<CodeBlock language="js">
{`const companies = await session
     // Make a dynamic DocumentQuery on 'Companies' collection
    .query({ collection: "Companies"})
     // Define a 'where' condition
    .whereStartsWith("Name", "O")
     // Call 'boost' to set the boost value of the previous 'where' predicate
    .boost(10)
     // Call 'orElse' so that OR operator will be used between statements
    .orElse()
    .whereStartsWith("Name", "P")
    .boost(50)
    .orElse()
    .whereEndsWith("Name", "OP")
    .boost(90)
    .all();

// * Results will contain all Company documents that either
//   (start-with 'O') OR (start-with 'P') OR (end-with 'OP') in their 'Name' field.
//
// * Matching documents the end-with 'OP' will be listed FIRST.
//   Matching documents that start-with 'P' will then be listed.
//   Matching documents that start-with 'O' will be listed LAST.
// 
// * Search is case-insensitive.
`}
</CodeBlock>
</TabItem>
<TabItem value="RQL" label="RQL">
<CodeBlock language="sql">
{`from "Companies" where
boost(startsWith(Name, "O"), 10) or
boost(startsWith(Name, "P"), 50) or
boost(endsWith(Name, "OP"), 90)
`}
</CodeBlock>
</TabItem>
</Tabs>

</Admonition>



## Get resulting score

* The score can be retrieved by either:

    * Request to __include explanations__ when making the query.  
      See [include query explanations](../../../../client-api/session/querying/debugging/include-explanations.mdx).

    * __Get the metadata__ of the resulting entities that were loaded to the session.  
      See example below.

<Admonition type="note" title="">

<TabItem value="boost_3" label="boost_3">
<CodeBlock language="js">
{`// Make a query:
// =============

const employees = await session
    .query(\{ collection: "Employees"\})
    .search('Notes', 'English')
    .search('Notes', 'Italian')
    .boost(10)
    .all();

// Get the score:
// ==============

// Call 'getMetadataFor', pass an entity from the resulting employees list
const metadata = session.advanced.getMetadataFor(employees[0]);

// Score is available in the '@index-score' metadata property
const score = metadata[CONSTANTS.Documents.Metadata.INDEX_SCORE];
`}
</CodeBlock>
</TabItem>

</Admonition>




