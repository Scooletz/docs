import Admonition from '@theme/Admonition';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';

<Admonition type="note" title="">

* To modify existing documents:

    * __Retrieve__ documents from the database using [load](../../client-api/session/loading-entities.mdx#load) or by a [query](../../client-api/session/querying/how-to-query.mdx#sessionquery).  
      The entities loaded from the documents are added to the internal entities map that the Session manages.

    * __Edit__ the properties you wish to change.  
      The session will track all changes made to the loaded entities.

    * __Save__ to apply the changes.  
      Once `saveChanges()` returns it is guaranteed that the data is persisted in the database.



* In this page:
    * [Load a document & update](../../client-api/session/updating-entities.mdx#load-a-document--update)
    * [Query for documents & update](../../client-api/session/updating-entities.mdx#query-for-documents--update)

</Admonition>
## Load a document & update

* In this example we `load` a company document and update its **postalCode** property.

<TabItem value="sample_document" label="sample_document">
<CodeBlock language="js">
{`// Sample company document structure
class Address \{
    constructor(code) \{
        this.postalCode = code;
    \}
\}

class Company \{
    constructor(name, code) \{
        this.name = name;
        this.address = new Address(code);
    \}
\}
`}
</CodeBlock>
</TabItem>

<TabItem value="load-company-and-update" label="load-company-and-update">
<CodeBlock language="js">
{`const session = documentStore.openSession();

// Load a company document
// The entity loaded from the document will be added to the Session's entities map
const company = await session.load("companies/1-A");

// Update the company's postalCode
company.address.postalCode = "TheNewPostalCode";

// Apply changes
await session.saveChanges();
`}
</CodeBlock>
</TabItem>



## Query for documents & update

* In this example we `query` for company documents whose **postalCode** property is _12345_,  
  and modify this property for the matching documents.

<TabItem value="query-company-and-update" label="query-company-and-update">
<CodeBlock language="js">
{`const session = documentStore.openSession();

// Query: find companies with the specified postalCode
// The entities loaded from the matching documents will be added to the Session's entities map
const matchingCompanies = await session.query(\{collection: "Companies"\})
    .whereEquals("address.postalCode", "12345")
    .all();

// Update the postalCode for the resulting company documents
matchingCompanies.forEach(c => c.address.postalCode = "TheNewPostalCode");

// Apply changes
await session.saveChanges();
`}
</CodeBlock>
</TabItem>




