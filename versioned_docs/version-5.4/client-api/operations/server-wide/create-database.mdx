---
title: "Operations: Server: How to Create a Database"
hide_table_of_contents: true
sidebar_label: Create Database
sidebar_position: 2
---

import Admonition from '@theme/Admonition';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';
import LanguageSwitcher from "@site/src/components/LanguageSwitcher";
import LanguageContent from "@site/src/components/LanguageContent";

export const supportedLanguages = ["csharp", "java"];


# Operations: Server: How to Create a Database
<LanguageSwitcher supportedLanguages={supportedLanguages} />
<LanguageContent language="csharp">


Create a new database on a server.

## Syntax

<TabItem value="create_database_syntax" label="create_database_syntax">
<CodeBlock language="csharp">
{`public CreateDatabaseOperation(
    DatabaseRecord databaseRecord,
    int replicationFactor = 1)
\{
\}
`}
</CodeBlock>
</TabItem>

| Parameters | Type | Description |
| ------------- | ------------- | ----- |
| **databaseRecord** | DatabaseRecord | instance of `DatabaseRecord` containing database configuration |
| **replicationFactor** | int | indicates how many nodes should contain the database |


## DatabaseRecord

`DatabaseRecord` is a collection of database configurations.  

### Constructor

| Name | Description |
| - | - |
| DatabaseRecord(`string` databaseName) | Initialize a new database record. |

### Properties
| Name | Type | Description |
| - | - | - |
| Disabled | `bool` (default: false) | [Disable](../../../client-api/operations/server-wide/toggle-databases-state.mdx) the database. |
| Encrypted | `bool` (default: false) | Enables database [encryption](../../../server/security/encryption/database-encryption.mdx). |
| DeletionInProgress | `Dictionary<string, DeletionInProgress>` | Mark the deletion of the database from specific nodes. |
| Topology | `DatabaseTopology` | By default it is `null` and the server will decided on which nodes to place the database according to the `Replication Factor`. |
| ConflictSolverConfig | `ConflictSolver` | Specify the strategy to resolve [Conflicts](../../../server/clustering/replication/replication-conflicts.mdx). |
| Indexes | `Dictionary<string, IndexDefinition>` | Define [Indexes](../../../indexes/creating-and-deploying.mdx#using-maintenance-operations) |
| AutoIndexes | `Dictionary<string, AutoIndexDefinition>` | Define [Auto Indexes](../../../indexes/creating-and-deploying.mdx#using-maintenance-operations) |
| Settings | `Dictionary<string, string>` | Provide [Configuration](../../../server/configuration/configuration-options.mdx) settings. |
| Revisions | `RevisionsConfiguration` | Set [Revisions  configuration](../../../document-extensions/revisions/client-api/operations/configure-revisions.mdx). |
| Expiration | `ExpirationConfiguration` | Set [Expiration](../../../server/extensions/expiration.mdx) configuration. |
| RavenConnectionStrings | `Dictionary<string, RavenConnectionString>` | Add [Raven Connection String](../../../client-api/operations/maintenance/connection-strings/add-connection-string.mdx)|
| SqlConnectionStrings | `Dictionary<string, SqlConnectionString>` | Add [SQL Connection String](../../../client-api/operations/maintenance/connection-strings/add-connection-string.mdx) |
| PeriodicBackups | `List<PeriodicBackupConfiguration>` | Add [Backup](../../../server/ongoing-tasks/backup-overview.mdx) tasks. |
| ExternalReplications | `List<ExternalReplications>` | Add [External Replication](../../../server/ongoing-tasks/external-replication.mdx) tasks. |
| RavenEtls | `List<RavenEtlConfiguration>` | Add [Raven ETL](../../../server/ongoing-tasks/etl/raven.mdx) tasks. |
| SqlEtls | `List<SqlEtlConfiguration>` | Add [SQL ETL](../../../server/ongoing-tasks/etl/sql.mdx) tasks. |
| Client | `ClientConfiguration` | Set [Client Configuration](../../../studio/server/client-configuration.mdx) |

#### Remarks
If `Topology` is specified, the `replicationFactor` will be ignored.

## Example

<Tabs groupId='languageSyntax'>
<TabItem value="Sync" label="Sync">
<CodeBlock language="csharp">
{`store.Maintenance.Server.Send(new CreateDatabaseOperation(new DatabaseRecord("MyNewDatabase")));
`}
</CodeBlock>
</TabItem>
<TabItem value="Async" label="Async">
<CodeBlock language="csharp">
{`await store.Maintenance.Server.SendAsync(new CreateDatabaseOperation(new DatabaseRecord("MyNewDatabase")));
`}
</CodeBlock>
</TabItem>
</Tabs>

<Admonition type="info" title="Information" id="information" href="#information">
To ensure database exists before creating it we can use the following example

### Example - EnsureDatabaseExists
<Tabs groupId='languageSyntax'>
<TabItem value="Sync" label="Sync">
<CodeBlock language="csharp">
{`public void EnsureDatabaseExists(IDocumentStore store, string database = null, bool createDatabaseIfNotExists = true)
{
    database = database ?? store.Database;

    if (string.IsNullOrWhiteSpace(database))
        throw new ArgumentException("Value cannot be null or whitespace.", nameof(database));

    try
    {
        store.Maintenance.ForDatabase(database).Send(new GetStatisticsOperation());
    }
    catch (DatabaseDoesNotExistException)
    {
        if (createDatabaseIfNotExists == false)
            throw;

        try
        {
            store.Maintenance.Server.Send(new CreateDatabaseOperation(new DatabaseRecord(database)));
        }
        catch (ConcurrencyException)
        {
            // The database was already created before calling CreateDatabaseOperation
        }

    }
}
`}
</CodeBlock>
</TabItem>
<TabItem value="Async" label="Async">
<CodeBlock language="csharp">
{`public async Task EnsureDatabaseExistsAsync(IDocumentStore store, string database = null, bool createDatabaseIfNotExists = true)
{
    database = database ?? store.Database;

    if (string.IsNullOrWhiteSpace(database))
        throw new ArgumentException("Value cannot be null or whitespace.", nameof(database));

    try
    {
        await store.Maintenance.ForDatabase(database).SendAsync(new GetStatisticsOperation());
    }
    catch (DatabaseDoesNotExistException)
    {
        if (createDatabaseIfNotExists == false)
            throw;

        try
        {
            await store.Maintenance.Server.SendAsync(new CreateDatabaseOperation(new DatabaseRecord(database)));
        }
        catch (ConcurrencyException)
        {
        }
    }
}
`}
</CodeBlock>
</TabItem>
</Tabs>

</Admonition>

<Admonition type="note" title="">
Creation of a database requires admin certificate
</Admonition>


</LanguageContent>
<LanguageContent language="java">


Create a new database on a server.

## Syntax

<TabItem value="create_database_syntax" label="create_database_syntax">
<CodeBlock language="java">
{`public CreateDatabaseOperation(DatabaseRecord databaseRecord)

public CreateDatabaseOperation(DatabaseRecord databaseRecord, int replicationFactor)
`}
</CodeBlock>
</TabItem>

| Parameters | Type | Description |
| ------------- | ------------- | ----- |
| **databaseRecord** | DatabaseRecord | Instance of `DatabaseRecord` containing database configuration |
| **replicationFactor** | int | Indicates how many nodes should contain the database |


## DatabaseRecord

`DatabaseRecord` is a collection of database configurations.  

### Constructor

| Name | Description |
| - | - |
| DatabaseRecord(`string` databaseName) | Initialize a new database record |

### Properties
| Name | Type | Description |
| - | - | - |
| disabled | `boolean` (default: false) | [Disable](../../../client-api/operations/server-wide/toggle-databases-state.mdx) the database |
| encrypted | `boolean` (default: false) | Enable database [Encryption](../../../server/security/encryption/database-encryption.mdx) |
| deletionInProgress | `Map<String, DeletionInProgress>` | Mark the deletion of the database from specific nodes |
| topology | `DatabaseTopology` | Topology is _'null'_ by default. The server will decide on which nodes to place the database according to the [Replication Factor](../../../glossary/replication-factor.mdx) |
| conflictSolverConfig | `ConflictSolver` | Specify the strategy to resolve [Conflicts](../../../server/clustering/replication/replication-conflicts.mdx) |
| indexes | `Map<String, IndexDefinition>` | Define [Indexes](../../../indexes/creating-and-deploying.mdx#using-maintenance-operations) |
| autoIndexes | `Map<String, AutoIndexDefinition>` | Define [Auto Indexes](../../../indexes/creating-and-deploying.mdx#using-maintenance-operations) |
| settings | `Map<String, String>` | Provide [Configuration](../../../server/configuration/configuration-options.mdx) settings |
| revisions | `RevisionsConfiguration` | Set [Revisions configuration](../../../document-extensions/revisions/client-api/operations/configure-revisions.mdx) |
| expiration | `ExpirationConfiguration` | Set [Expiration](../../../server/extensions/expiration.mdx) configuration |
| ravenConnectionStrings | `Map<String, RavenConnectionString>` | Add [Raven Connection String](../../../client-api/operations/maintenance/connection-strings/add-connection-string.mdx)|
| sqlConnectionStrings | `Map<String, SqlConnectionString>` | Add [SQL Connection String](../../../client-api/operations/maintenance/connection-strings/add-connection-string.mdx) |
| periodicBackups | `List<PeriodicBackupConfiguration>` | Add [Backup](../../../server/ongoing-tasks/backup-overview.mdx) tasks |
| externalReplications | `List<ExternalReplications>` | Add [External Replication](../../../server/ongoing-tasks/external-replication.mdx) tasks |
| ravenEtls | `List<RavenEtlConfiguration>` | Add [Raven ETL](../../../server/ongoing-tasks/etl/raven.mdx) tasks |
| sqlEtls | `List<SqlEtlConfiguration>` | Add [SQL ETL](../../../server/ongoing-tasks/etl/sql.mdx) tasks |
| client | `ClientConfiguration` | Set [Client Configuration](../../../studio/server/client-configuration.mdx) |

#### Remarks
If `Topology` is specified, the `replicationFactor` will be ignored.  

## Example

<TabItem value="CreateDatabase" label="CreateDatabase">
<CodeBlock language="java">
{`DatabaseRecord databaseRecord = new DatabaseRecord();
databaseRecord.setDatabaseName("MyNewDatabase");
store.maintenance().server().send(new CreateDatabaseOperation(databaseRecord));
`}
</CodeBlock>
</TabItem>

<Admonition type="info" title="Information" id="information" href="#information">
To ensure that a database exists before creating it we can use the following example:  

### Example - EnsureDatabaseExists

<TabItem value="EnsureDatabaseExists" label="EnsureDatabaseExists">
<CodeBlock language="java">
{`public void ensureDatabaseExists(IDocumentStore store, String database, boolean createDatabaseIfNotExists) \{
    database = ObjectUtils.firstNonNull(database, store.getDatabase());

    if (StringUtils.isBlank(database)) \{
        throw new IllegalArgumentException("Value cannot be null or whitespace");
    \}

    try \{
        store.maintenance().forDatabase(database).send(new GetStatisticsOperation());
    \} catch (DatabaseDoesNotExistException e) \{
        if (!createDatabaseIfNotExists) \{
            throw e;
        \}

        try \{
            DatabaseRecord databaseRecord = new DatabaseRecord();
            databaseRecord.setDatabaseName(database);
            store.maintenance().server().send(new CreateDatabaseOperation(databaseRecord));
        \} catch (ConcurrencyException ce) \{
            // The database was already created before calling CreateDatabaseOperation
        \}
    \}
\}
`}
</CodeBlock>
</TabItem>

</Admonition>

<Admonition type="note" title="">
The creation of a database requires an admin certificate
</Admonition>  


</LanguageContent>

<!---
- [Distributed Database](../../../server/clustering/distribution/distributed-database)
- [Create Database via Studio](../../../studio/database/create-new-database/general-flow)

-->